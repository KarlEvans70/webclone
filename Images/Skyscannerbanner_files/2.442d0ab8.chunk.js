/*! For license information please see 2.442d0ab8.chunk.js.LICENSE.txt */
(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[2],{102:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(80),i=n(5),a=n(6),o=n(39),s=n(40),u=n(4),c=n.n(u),l=n(12),f=n(119),p=n(175),h=n(177),d=n(0),v=function(){var e=new f.a("device_guid"),t=e.getValue();if(!t){var n=Object(l.v4)();return e.setValue(n),e.store(730),n}return t},b={search_guid:["searchresultpage_guid","searchresultoption_guid","bookingpaneloption_guid","miniredirect_guid"],searchresultpage_guid:["searchresultoption_guid","bookingpaneloption_guid","miniredirect_guid"],searchresultoption_guid:["bookingpaneloption_guid","miniredirect_guid"],bookingpaneloption_guid:["miniredirect_guid"],miniredirect_guid:[]},g=function(e){var t=e.messageGuid;return void 0===t||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(t)},y=function(e){return"".concat(e.split(".").pop().toLowerCase(),"_guid")},m=function(e){return"".concat(e.split(".").pop().toLowerCase,"_checksum")},_=function(e,t,n){e.trySetValue(t,n,!1,!0),(b[t]||[]).forEach((function(t){e.tryDeleteValue(t)}))},k=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Object(o.a)(this,e),!r)throw new Error("A schema must be provided");if(!t)throw new Error("A namespaced store must be provided");this.$window=d.a.getWindow(),this.store=t,this.fallbackStore=n,this.schema=r,this.message=null,this.opts=i}return Object(s.a)(e,[{key:"getSeqNumber",value:function(){var e=(this.store.tryGetValue("sequence_num")||0)+1;return this.store.trySetValue("sequence_num",e),e}},{key:"buildHeader",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)();case 2:return n=e.sent,null==(r=this.store.tryGetValue(y("clients.UserPreferences"),!1,!0))&&(r=this.fallbackStore.tryGetValue(y("clients.UserPreferences"),!1,!0)),e.abrupt("return",{header:{guid:t,client_timestamp:Object(h.b)(new Date(Date.now()),!0),traveller_identity:{utid:Object(p.a)(),authentication_status:n?"AUTHENTICATED":"UNAUTHENTICATED",preference_string:new f.a("preferences").getValue()},sequence_number:this.getSeqNumber(),device_guid:v(),experiment_allocation_id:new f.a("experiment_allocation_id").getValue(),user_agent:this.$window.navigator?this.$window.navigator.userAgent:"UNKNOWN",user_preferences_guid:r}});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createAndStoreGuid",value:function(){var e=this.opts.messageGuid||Object(l.v4)(),t=y(this.schema);return!1!==this.opts.store_guid&&_(this.store,t,e),e}},{key:"buildMessage",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.createAndStoreGuid(),e.next=3,this.buildHeader(n);case 3:return r=e.sent,a=Object(i.a)(Object(i.a)({},r),t),this.message=a,e.abrupt("return",this.message);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){return this.message}}]),e}(),x=k,O=n(41),w=n(42),E=n(3),S=n(66),j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.a.ERROR_LEVEL.ERROR;E.a.logError({component:"saddlebag-user-tracking-events",message:e,level:n,event:t})},T=function(){function e(t,n){Object(o.a)(this,e),this.grapplerLogger=new h.a(t,n,{enhance:!1}),this.store=new r.a("eventstracking"),this.fallbackStore=new r.a("funnelevents")}return Object(s.a)(e,[{key:"trackEvent",value:function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){var i,a,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o.length>3&&void 0!==o[3]?o[3]:{},"object"===typeof r){e.next=3;break}throw new Error("message should be an Object");case 3:if(g(i)){e.next=5;break}throw new Error("The specified guid is invalid. It must conform to ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$");case 5:return e.prev=5,a=new x(this.store,this.fallbackStore,n,i),e.next=9,a.buildMessage(r);case 9:return this.grapplerLogger.sendCustomEvent(t,n,a.get()).catch((function(e){return j(String(e),n,E.a.ERROR_LEVEL.WARN)})),e.abrupt("return",{guid:a.get().header.guid});case 13:e.prev=13,e.t0=e.catch(5),j(e.t0.message,n);case 16:return e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"trackBatchEvent",value:function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){var a,o,s,u=this,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>3&&void 0!==l[3]?l[3]:{},g(a)){e.next=3;break}throw new Error("The specified guid is invalid. It must conform to ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$");case 3:return e.prev=3,o=r.map((function(e,t){if("object"!==typeof e)throw new Error("message should be an Object");return new x(u.store,u.fallbackStore,n,Object(i.a)(Object(i.a)({},a),{},{store_guid:a.store_guid===t})).buildMessage(e)})),e.next=7,Promise.all(o);case 7:return s=e.sent,this.grapplerLogger.sendCustomEvents(t,n,s).catch((function(e){return j(String(e),n,E.a.ERROR_LEVEL.WARN)})),e.abrupt("return",s.map((function(e){return{guid:e.header.guid}})));case 12:e.prev=12,e.t0=e.catch(3),j(e.t0.message,n);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"eventHasBeenLogged",value:function(e,t){var n=this.store.tryGetValue(m(e));if(!n)return!1;var r=JSON.parse(n);return!(r.logged_at<=Object(S.e)().getTime()-18e5)&&(delete r.logged_at,JSON.stringify(t)===JSON.stringify(r))}},{key:"markEventAsLogged",value:function(e,t){var n=Object(i.a)({logged_at:Object(S.e)().getTime()},t);this.store.trySetValue(m(e),JSON.stringify(n))}}]),e}(),N=function(e){Object(O.a)(n,e);var t=Object(w.a)(n);function n(e,r){var i;return Object(o.a)(this,n),(i=t.call(this,e,r)).eventName="funnel_events",i}return Object(s.a)(n,[{key:"track",value:function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.abrupt("return",this.trackEvent(this.eventName,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trackBatch",value:function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:{},e.abrupt("return",this.trackBatchEvent(this.eventName,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(T)},108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COOKIES=t.KEY_VALUE_SEPARATOR=t.PAIR_SEPARATOR=t.COOKIE_SEPARATOR=void 0;t.COOKIE_SEPARATOR=";";t.PAIR_SEPARATOR="&";t.KEY_VALUE_SEPARATOR=":::";var r=Object.freeze({SCANNER:"scanner",CULTURE:"ssculture",AB:"ssab",AB_OVERRIDES:"ssaboverrides",AB_GROUP:"abgroup",TRAVELLER_CONTEXT:"traveller_context",ANONYMOUS_TOKEN:"__Secure-anon_token",ANONYMOUS_CSRF_TOKEN:"__Secure-anon_csrf_token",SID_TOKEN:"sid_token",SID_UTID:"sid_utid",SID_SESSION_TOKEN:"sid_session_token",GDPR:"gdpr",HAS_APP:"has_app",DEVICE_GUID:"device_guid",SECURE_SKA:"__Secure-ska",EXPERIMENT_ALLOCATION_ID:"experiment_allocation_id"});t.COOKIES=r},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(39),i=n(40),a=n(125),o=n.n(a),s=(n(0),n(231),function(e){return Number.isInteger?Number.isInteger(e):"number"===typeof e&&isFinite(e)&&Math.floor(e)===e});function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.path,a=void 0===i?"/":i,u=r.secure,c=void 0===u||u;if(null==n)o.a.set(e,t,{path:a,secure:c});else{if(!s(n))throw new Error("Expires parameter needs to be an integer.");o.a.set(e,t,{expires:n,path:a,secure:c})}}var c=function(){function e(t){Object(r.a)(this,e),this.name=t,this.cookieValue=o.a.get(t)}return Object(i.a)(e,[{key:"getValue",value:function(){return this.cookieValue}},{key:"setValue",value:function(e){return this.cookieValue=e,this}},{key:"store",value:function(e,t){return u(this.name,this.cookieValue,e,t),this}},{key:"storeByDate",value:function(e,t){return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.path,a=void 0===i?"/":i,s=r.secure,u=void 0===s||s;if(!n||"object"!==typeof n||!n.toUTCString)throw new Error("Expiration date must be a Date.");o.a.set(e,t,{expires:n,path:a,secure:u})}(this.name,this.cookieValue,e,t),this}},{key:"remove",value:function(){o.a.remove(this.name)}}]),e}()},125:function(e,t,n){var r,i;!function(a){if(void 0===(i="function"===typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=a(),!!0){var o=window.Cookies,s=window.Cookies=a();s.noConflict=function(){return window.Cookies=o,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function a(t,n,a){if("undefined"!==typeof document){"number"===typeof(a=e({path:"/"},i.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(c){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in a)a[u]&&(s+="; "+u,!0!==a[u]&&(s+="="+a[u].split(";")[0]));return document.cookie=t+"="+n+s}}function o(e,n){if("undefined"!==typeof document){for(var i={},a=document.cookie?document.cookie.split("; "):[],o=0;o<a.length;o++){var s=a[o].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(l){}if(i[c]=u,e===c)break}catch(l){}}return e?i[e]:i}}return i.set=a,i.get=function(e){return o(e,!1)},i.getJSON=function(e){return o(e,!0)},i.remove=function(t,n){a(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))},175:function(e,t,n){"use strict";function r(e){this.message=e}n.d(t,"b",(function(){return ye})),n.d(t,"a",(function(){return me})),r.prototype=new Error,r.prototype.name="InvalidCharacterError";window.atob&&window.atob.bind(window);function i(e){this.message=e}i.prototype=new Error,i.prototype.name="InvalidTokenError";var a=n(6),o=n(39),s=n(40),u=n(4),c=n.n(u),l=n(182),f=n(229),p=function(){function e(t){Object(o.a)(this,e),this.eventPublishingEnabled=t}return Object(s.a)(e,[{key:"publishMetric",value:function(e){this.eventPublishingEnabled&&Object(l.a)(e,"login",f.version,1)}}]),e}(),h=n(80),d="csrfToken",v=function(){return new h.a("SID")},b=function(){function e(t,n){Object(o.a)(this,e),this.baseUrl=t,this.metricPublisher=n}return Object(s.a)(e,[{key:"validate",value:function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.validateSession({body:{idleSeconds:t,clientTimeUtc:n},path:"tokens/validate"}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post({reason:t},"tokens/logout");case 2:if((n=e.sent).ok){e.next=6;break}throw this.metricPublisher.publishMetric("sid_logout_error"),new Error(n.statusText);case 6:return v().tryDeleteValue(d),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateSession",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,r=t.path,this.metricPublisher.publishMetric("sid_validate_session_attempt"),e.next=4,this.post(n,r);case 4:if((i=e.sent).ok){e.next=8;break}throw this.metricPublisher.publishMetric("sid_validate_session_error"),new Error(i.statusText);case 8:return e.next=10,i.json();case 10:return(a=e.sent).csrfToken&&(o=a.csrfToken,v().trySetValue(d,o,!1,!1)),this.metricPublisher.publishMetric("sid_validate_session_success"),e.abrupt("return",a);case 14:case"end":return e.stop()}var o}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"content-type":"application/json",accept:"application/json",pragma:"no-cache","cache-control":"no-cache"},cache:"no-store",credentials:"include",body:JSON.stringify(t)},i="".concat(this.baseUrl,"/").concat(n),e.next=4,fetch(i,r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),g=function(){return new Date};var y="sid_validation_status",m="sid_validation_reason",_=new h.a("SID"),k=function(){return g().getTime()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return Math.floor(Math.random()*(t-e+1)+e)},O=function(e){return 1e3*e},w=function(e){var t=e.status,n=e.reason;_.trySetValue(y,t),_.trySetValue(m,n)},E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e);var n=t.events,r=void 0===n?["click","keydown","scroll","mousewheel","touchstart"]:n,i=t.namespace,a=void 0===i?"hyperdrive":i;this.localStorage=new h.a(a),this.events=r,this.started=!1,this.updateLocalStore=this.updateLocalStore.bind(this),this.clearLocalStore=this.clearLocalStore.bind(this)}return Object(s.a)(e,[{key:"start",value:function(){this.started||(this.started=!0,this.updateLocalStore(),this.subscribe())}},{key:"stop",value:function(){this.started=!1,this.unsubscribe(),this.clearLocalStore()}},{key:"subscribe",value:function(){var e=this;this.events.forEach((function(t){return window.addEventListener(t,e.updateLocalStore,{passive:!0})}))}},{key:"unsubscribe",value:function(){var e=this;this.events.forEach((function(t){return window.removeEventListener(t,e.updateLocalStore,{passive:!0})}))}},{key:"updateLocalStore",value:function(){this.localStorage.trySetValue("sid-last-active",k(),!0,!1)}},{key:"clearLocalStore",value:function(){this.localStorage.tryDeleteValue("sid-last-active",!0,!1)}},{key:"getLastActivityTime",value:function(){return this.localStorage.tryGetValue("sid-last-active",!0,!1)||k()}},{key:"getIdleTimeMillis",value:function(){return k()-this.getLastActivityTime()}}]),e}(),S=E,j=n(54),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e);var n=t.retryInterval,r=void 0===n?1e4:n;this.retryInterval=r,this.timeouts={}}return Object(s.a)(e,[{key:"schedulePersistent",value:function(e,t){var n=t.accessTokenExpiry-k()+x();this.schedule(e,n)}},{key:"scheduleTemporary",value:function(e,t){var n=t.sessionExpiry,r=t.maxIdleSeconds,i=n-k(),a=Math.min(i,O(r))+x();this.schedule(e,a)}},{key:"scheduleRetry",value:function(e){this.schedule(e)}},{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.retryInterval;this.timeouts.validate&&clearTimeout(this.timeouts.validate),this.timeouts.validate=setTimeout(e,t)}},{key:"cancel",value:function(){var e=this;Object.keys(this.timeouts).forEach((function(t){clearTimeout(e.timeouts[t])}))}}]),e}(),N=T,A=n(2),P=n(5),I=n(177),C=n(10),D=function(e){return function(e){return null==e||void 0===e}(e)?"undefined":e.toString()},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){return Object(P.a)(Object(P.a)({},t),{},Object(C.a)({},n,D(e[n])))}),{})},M=function(){function e(t){var n=t.authConsumer;Object(o.a)(this,e),this.grapplerLogger=new I.a("public","login"),this.authConsumer=n}return Object(s.a)(e,[{key:"publishEvent",value:function(e,t){try{var n=this.authConsumer,i=R(t);this.grapplerLogger.sendApplogMessage({message:e,severity:"INFO",fields:Object(P.a)({authConsumer:n,market:"unknown"},i)})}catch(r){}}},{key:"publishError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var i=this.authConsumer,a=t.name,o=t.message,s=t.stack,u=t.errorCode,c=R(n);this.grapplerLogger.sendApplogMessage({message:e,severity:"ERR",fields:Object(P.a)({authConsumer:i,market:"unknown"},c),exception:{type:a,traceback:s,message:o||u}})}catch(r){}}}]),e}(),V=n(102),L=function(){function e(t){var n=t.applogPublisher;Object(o.a)(this,e),this.applogPublisher=n}return Object(s.a)(e,[{key:"publishLogoutSuccess",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.utid,e.prev=1,r=new V.a("public","logout"),e.next=5,r.track("clients.AuthenticationStatusChange",{previous_traveller_identity:{utid:n,authentication_status:"AUTHENTICATED"}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.applogPublisher.publishError("Failed to send AuthenticationStatusChange funnel event",e.t0);case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),U="Logout",B="Session Validation Error",Y=function(){function e(t){var n=t.authConsumer;Object(o.a)(this,e),this.applogPublisher=new M({authConsumer:n}),this.trustedFunnelPublisher=new L({applogPublisher:this.applogPublisher}),this.authConsumer=n}return Object(s.a)(e,[{key:"publishLogoutSuccess",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,i,a,o,s,u=this,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:{},n=t.cause,r=t.utid,i=t.sessionType,a=t.platformId,o=t.reason,s="".concat(U," Succeeded"),this.swallowErrors(s,(function(){u.applogPublisher.publishEvent(s,{cause:n,utid:r,sessionType:i,platformId:a,reason:o}),A.a.publish("sid-logout-success",{cause:n}),u.trustedFunnelPublisher.publishLogoutSuccess({utid:r})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publishSessionValidationError",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,i,a=this,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.utid,r=t.authError,i=B,this.swallowErrors(i,(function(){a.applogPublisher.publishError(i,r,{utid:n}),A.a.publish("sid-session-validation-error",r.errorMessage)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"swallowErrors",value:function(e,t){try{t()}catch(r){this.applogPublisher.publishError("".concat(e," Event Publishing Error"),r)}}}]),e}(),F="sid_lock",$="TIMED_OUT",J="COMPLETED_BY_OTHER_TAB",K=function(){return parseInt(_.tryGetValue(F),10)},z=function(){},Z=function(){window.removeEventListener("storage",z)},H=function(e){return new Promise((function(t){var n=setTimeout((function(){return t($)}),e);Z(),z=function(e){e.key===F&&null===e.newValue&&(clearTimeout(n),t(J))},window.addEventListener("storage",z)}))},W=function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,i,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[K(),g().getTime()],n=t[0],r=t[1];case 1:if(!(r<n&&i!==J)){e.next=11;break}return a=n-r,e.next=5,H(a);case 5:i=e.sent,o=[K(),g().getTime()],n=o[0],r=o[1],e.next=1;break;case 11:return Z(),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=g().getTime();_.trySetValue(F,e+5e3)},q=function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:if(e.sent===J){e.next=10;break}return G(),e.next=7,t();case 7:return n=e.sent,_.tryDeleteValue(F),e.abrupt("return",n);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=n(119),Q="PERSISTENT",ee="TEMPORARY",te="MOBILE",ne="INVALID",re=function(e){return"https://skyscanner.net/".concat(e)},ie=function(){try{var e=new X.a("sid_session_token").getValue();if(!e)return{};var t=e.split(".")[1];return JSON.parse(window.atob(t))}catch(n){return{}}},ae=function(){try{var e=ie(),t=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie())[re("sessionType")]}(e),n=new X.a("sid_utid").getValue();switch(t){case Q:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:Q,accessTokenExpiry:e[re("accessTokenExpiry")],accessTokenExpiryDate:new Date(e[re("accessTokenExpiry")])})}(e);case ee:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:ee,maxIdleSeconds:e[re("maxIdleSeconds")],sessionExpiry:e[re("sessionExpiry")],sessionExpiryDate:new Date(e[re("sessionExpiry")])})}(e);case te:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:te})}(e);default:return n?Object.freeze({sessionType:ne}):void 0}}catch(r){return}},oe=n(41),se=n(42),ue=n(185),ce=n(67);var le=n(186);function fe(e,t,n){return fe=Object(le.a)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Object(ce.a)(i,n.prototype),i},fe.apply(null,arguments)}function pe(e){var t="function"===typeof Map?new Map:void 0;return pe=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return fe(e,arguments,Object(ue.a)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(ce.a)(r,e)},pe(e)}var he=function(e){Object(oe.a)(n,e);var t=Object(se.a)(n);function n(e){var r,i=e.errorCode,a=e.errorMessage,s=e.traceback;return Object(o.a)(this,n),(r=t.call(this)).errorCode=i,r.errorMessage=a,r.traceback=s,r}return Object(s.a)(n)}(pe(Error)),de="session-inactive",ve="session-expired",be=function(){function e(){Object(o.a)(this,e);var t=Object(j.getEnvFromUrl)(),n=Object(j.default)(t),r=n.baseUrl,i=n.eventPublishingEnabled,a=n.retryInterval;this.metricPublisher=new p(i),this.validateSessionClient=new b(r,this.metricPublisher),this.activityTracker=new S,this.eventPublisher=new Y({authConsumer:"session-validation"}),this.scheduler=new N({retryInterval:a}),this.validationErrorCounter={},this.checkPersistentSession=this.checkPersistentSession.bind(this),this.stop=this.stop.bind(this),this.restart=this.restart.bind(this),this.checkTempSession=this.checkTempSession.bind(this),this.publishSessionValidationError=this.publishSessionValidationError.bind(this)}return Object(s.a)(e,[{key:"getValidatedSession",value:function(){return this.promise||(this.promise=this.validateSession()),this.promise}},{key:"stop",value:function(){this.scheduler.cancel(),this.activityTracker.stop(),this.promise=void 0,this.session=void 0}},{key:"restart",value:function(){this.stop(),this.promise=this.validateSession()}},{key:"validateSession",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=ae())||t.sessionType!==ne){e.next=5;break}return e.next=4,this.validateSessionClient.logout("session-invalid");case 4:return e.abrupt("return",void 0);case 5:if(this.session=t,!(this.session&&this.session.sessionType!==te)){e.next=19;break}this.activityTracker.start(),e.t0=this.session.sessionType,e.next=e.t0===Q?12:e.t0===ee?15:18;break;case 12:return e.next=14,this.checkPersistentSession();case 14:case 17:case 18:return e.abrupt("break",19);case 15:return e.next=17,this.checkTempSession();case 19:return e.abrupt("return",this.session);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleSessionValidation",value:function(e,t,n){var r,i=e.status,a=e.reason;switch(i){case"PERSISTENT_SESSION_REFRESHED":case"PERSISTENT_SESSION_EXTENDED":case"PERSISTENT_SESSION_NO_REFRESH":this.scheduler.schedulePersistent(this.checkPersistentSession,this.session);break;case"PERSISTENT_SESSION_LOGGED_OUT":r="inactive"===a?de:"session-logged-out",this._invalidateSession(r,t,n,a);break;default:this.stop()}}},{key:"_performRetry",value:function(e){var t=new he({errorMessage:e.message,traceback:e.stack});this.publishSessionValidationError(e,t),this.scheduler.scheduleRetry(this.checkPersistentSession)}},{key:"_invalidateSession",value:function(e,t,n,r){this.eventPublisher.publishLogoutSuccess({cause:e,utid:t,sessionType:n,reason:r}),this.stop()}},{key:"publishSessionValidationError",value:function(e,t){var n=this.session.utid;this.validationErrorCounter[e.message]=this.validationErrorCounter[e.message]||0,this.validationErrorCounter[e.message]<5&&(this.validationErrorCounter[e.message]+=1,this.eventPublisher.publishSessionValidationError({utid:n,authError:t}))}},{key:"isSessionActive",value:function(){var e=O(this.session.maxIdleSeconds);return this.activityTracker.getIdleTimeMillis()<=e}},{key:"validatePersistentSession",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,i,o=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=this.activityTracker.getIdleTimeMillis(),t=s/1e3,n=k(),e.next=4,q(Object(a.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateSessionClient.validate(t,n);case 2:return r=e.sent,w(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)}))));case 4:return r=e.sent,i=null===r,e.abrupt("return",i?{status:_.tryGetValue(y),reason:_.tryGetValue(m)}:r);case 7:case"end":return e.stop()}var s}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkPersistentSession",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.session,n=t.utid,r=t.accessTokenExpiry,!(k()>r)){e.next=11;break}return e.next=6,this.validatePersistentSession();case 6:i=e.sent,this.session=ae(),this._handleSessionValidation(i,n),e.next=12;break;case 11:this.scheduler.schedulePersistent(this.checkPersistentSession,this.session);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this._performRetry(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"checkTempSession",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.session,n=t.utid,r=t.sessionExpiry,i=t.sessionType,!(k()>r)){e.next=8;break}return e.next=5,this.validateSessionClient.logout(ve);case 5:this._invalidateSession(ve,n,i),e.next=15;break;case 8:if(this.isSessionActive()){e.next=14;break}return e.next=11,this.validateSessionClient.logout(de);case 11:this._invalidateSession(de,n,i),e.next=15;break;case 14:this.scheduler.scheduleTemporary(this.checkTempSession,this.session);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ge=function(){var e=Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.SessionValidator||(window.SessionValidator=new be),t=window.SessionValidator,e.next=3,t.getValidatedSession();case 3:return n=e.sent,e.abrupt("return",void 0!==n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=(Object.freeze({UNSET:0,UNAUTHENTICATED:1,AUTHENTICATED:2}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,t=new Promise((function(t){setTimeout((function(){return t(!1)}),e)}));return Promise.race([ge(),t])}),me=function(){var e=ae();return e&&e.utid||new X.a("traveller_context").getValue()}},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return x}));var r=n(39),i=n(40),a=n(5),o=n(7),s=n(0),u=n(66),c=n(230),l=n.n(c),f={EU_WEST_1:0,EU_CENTRAL_1:1,AP_SOUTHEAST_1:2,AP_NORTHEAST_1:3,UK1:64,UK2:65,NL1:66,SG1:67,HK1:68},p={MILLI:0,SECOND:1,DAY:2,WEEK:4,MONTH:5,YEAR:6,ANYTIME:7,MINUTE:8},h=s.a.getWindow(),d=function(e){return"".concat(e||"").trim()},v=function(e){if(!isFinite(e))return 0;for(var t=0,n=1,r=Math.pow(10,20);Math.round(e*n)/n!==e&&n<=r;){if(n>=r)return null;n*=10,t++}return t},b=function(e){var t=null,n=isNaN(+e)?null:parseFloat(e);if(n&&"number"===typeof n&&!isNaN(n)){if((t={precision:v(n),amount:parseInt("".concat(n).replace(".",""),10)}).amount.toString().length>=10){var r=t.amount.toString().length-10;t.precision-=r,t.amount=parseInt(t.amount.toString().substring(0,10),10)}2147483647-t.amount<0&&(t.precision-=1,t.amount=parseInt(t.amount.toString().substring(0,9),10))}return t},g=function e(t){if(!t)return t;var n=JSON.parse(l.a.stringify(t));return Object.keys(n).forEach((function(t){var r=n[t];(r&&(r.constructor===Object||r.constructor===Array)||"function"===typeof r)&&(n[t]=e(r)),function(e){return void 0===e||null===e||""===e||"object"===typeof e&&0===Object.keys(e).length||"number"===typeof e&&e!==+e}(r)&&delete n[t]})),Array.isArray(n)&&(n=n.filter(Boolean)),n},y=function(e,t,n){var r=null,i=0,a=function(e,t,n){var r=t,i=n,a=e||new Date,o=u.b.getTimezoneOffset(a),s=r&&u.b.getTimezoneOffset(r),c=i&&u.b.getTimezoneOffset(i);return{thisTZOffset:o,jan:r=s||u.b.getTimezoneOffset(new Date(a.getFullYear(),0,1)),jul:i=c||u.b.getTimezoneOffset(new Date(a.getFullYear(),6,1))}}(e,t,n),o=a.thisTZOffset,s=a.jan,c=a.jul;return s>c?(r=c,i=s-c):s<c&&(r=s,i=c-s),c!==s&&null!=r&&r===o?{DSTOffset:i,TZOffset:-1*o-i}:{DSTOffset:0,TZOffset:-1*o||0}},m=function(e){return isNaN(+e)?null:parseInt(e,10)},_=function(e){return e&&"unknown"===e.toString().toLowerCase()?null:e},k=function(e,t){if(!e)return null;if(e instanceof Date)return e;if("number"===typeof e)return new Date(e);if("string"===typeof e&&"YYYYMMDDHHmmss"===t)try{return new Date(e.slice(0,4),e.slice(4,6)-1,e.slice(6,8),e.slice(8,10),e.slice(10,12),e.slice(12,14))}catch(i){return null}if("string"===typeof e){var n,r=e.split(/[ZT:\\.\\//-]/);try{n=new Date(Date.UTC(r[0],r[1]-1||0,r[2]||1,r[3]||null,r[4]||null,r[5]||null))}catch(a){return null}return n instanceof Date&&!isNaN(n.valueOf())?n:null}return null},x=function(e,t,n,r){var i=n||null,a=e;"string"===typeof e&&e&&4===e.length&&e.substring(2,4)<=12&&(a="20".concat(e));var o=k(a,r);o&&"string"===typeof a&&!i&&(i=function(){switch(a.length){case 4:return"YEAR";case 6:case 7:return"MONTH";case 8:case 10:return"DAY";default:return"MILLI"}}()),o&&o instanceof Date&&!i&&(i="MILLI");var s={};if(o&&(s={unix_time_millis:o.getTime(),date_time_kind:p[i]}),o&&o instanceof Date&&t){var u=y(o);s.timezone_offset_mins=u.TZOffset||0,s.daylight_savings_offset_mins=u.DSTOffset||0}return s.unix_time_millis||s.date_time_kind?g(s):null},O=function(e){return _(e)?function(e){var t=/(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/gi;return e&&t.test(e)?e.match(t)[0]:null}(e):null},w=function(){var e=Object(s.e)(),t=e.width*e.width+e.height*e.height,n=Math.round(Math.sqrt(t)/72*10)/10,r=h.screen||{};return{usable_width:e.width,usable_height:e.height,display_width:r.width,display_height:r.height,display_ppi:r.pixelDepth,diag_in_inches:n,device_pixel_ratio:h.device_pixel_ratio||null}},E=function(e,t){var n,r=e||{},i=r.utid,a=r.authState,o=r.preferences,s=r.ssTrack,u=r.gaCookie,c=r.screen,l=r.nav,p=r.nodeName,h=r.scaffoldVersion,v=r.componentContext,y=r.config,k=r.guid,E={};try{E.produced_by=2,E.producer_version=h,E.service_instance_fingerprint=function(e){var t=e.version,n=e.nodeName,r=e.identifier,i=e.version_identifier,a=n&&n.length>=8?n.substring(5,8):null,o=e.dc;return g({data_center:void 0===o?f[a]:o,name:n,version_tag:t,version_identifier:i,identifier:r})}({version:h,nodeName:p}),E.traveller_identity=function(e,t,n,r,i){var a=!1;-1===[2,1,0].indexOf(Number(t))&&(a=!0);var o=/.+\..+\.(.+.\..+)$/.exec(i),s={utid:e,user_status:a?"0":t.toString(),authentication_status:m(t),preference_string:d(n),sstrack:r,ga_cid:o&&o.length>1?o[1]:null};return g(s)}(i,a,o,s,u),E.client_details=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.navigator,r={user_agent:n.userAgent,vendor_name:n.vendor,browser_name:_(e.browserName)||n.appName,browser_version:_(e.browserVersion)||n.appVersion,is_browser:_(e.desktop),display_height:m(t.display_height),display_width:m(t.display_width),display_ppi:m(t.display_ppi),usable_display_width:m(t.usable_width),usable_display_height:m(t.usable_height),diagonal_screen_size_int:b(t.diag_in_inches),device_pixel_ratio_int:b(t.device_pixel_ratio)||null,ip_address:O(e.ipAddress),is_mobilephone:_(e.mobile),is_tablet:_(e.tablet),os_version:_(e.osVersion)};return document.referrer&&(r.referrer_url=document.referrer),g(r)}(v,c,l),E.traveller_culture_settings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g({country:e.market,currency:e.currency,locale:e.locale})}(v),E.ab_tests=g(y&&y.featureTests||null),E.created_on=x(new Date(Date.now()),!0),E.associate_id=(n=v&&v.associateId||null,_(n)?function(e){var t=/([a-z]{3}[_][a-z]{3}[_][0-9]{5}[_][0-9]{5})/i;return e&&t.test(e)?e.match(t)[0].toUpperCase():"DIR_ECT_00000_00000"}(n):null),E.guid=k||function(){for(var e=[],t=0;t<36;)e[t]=Math.floor(16*Math.random()),t+=1;e[14]=4,e[19]=3&e[19]|8;for(var n=0;n<36;)e[n]="0123456789abcdef"[e[n]],n+=1;return e[8]=e[13]=e[18]=e[23]="-",e.join("")}()}catch(S){if(!t)throw S}return E},S="https://slipstream.skyscanner.net",j="/slipstream",T=function(e,t,n){var r;if(n){var i=Object(a.a)(Object(a.a)({},t),{},{event_header:E()});r=JSON.stringify(i)}else r=JSON.stringify(t);return Object(o.a)(e,{method:"POST",body:r,headers:{"Content-Type":"application/json"}}).catch((function(t){console.error("".concat(t,". Request to ").concat(e," failed. Request payload: ").concat(r,"."))}))},N=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.enhance,o=void 0===a||a;if(Object(r.a)(this,e),"public"!==t&&"public-sandbox"!==t)throw new Error('GrapplerLogger environment must be "public" or "public-sandbox"');this.env=t,this.serviceName=n,this.enhance=o,this.endpoint=Object(s.f)()?j:S}return Object(i.a)(e,[{key:"sendApplogMessage",value:function(e){var t="".concat(this.endpoint,"/grp/v1/applog/").concat(this.env,"/").concat(this.serviceName);return T(t,e,this.enhance)}},{key:"sendCustomEvent",value:function(e,t,n){var r="".concat(this.endpoint,"/grp/v1/custom/").concat(this.env,"/").concat(this.serviceName,"/").concat(e,"/").concat(t);return T(r,n,this.enhance)}},{key:"sendCustomEvents",value:function(e,t,n){return function(e,t,n){var r=t.reduce((function(e,t){return e+(n?JSON.stringify(Object(a.a)(Object(a.a)({},t),{},{event_header:E()})):JSON.stringify(t))}),"");return Object(o.a)(e,{method:"POST",body:r,headers:{"Content-Type":"application/json"}}).catch((function(t){console.error("".concat(t,". Request to ").concat(e," failed. Request payload: ").concat(r,"."))}))}("".concat(this.endpoint,"/grp/v1/custom/").concat(this.env,"/").concat(this.serviceName,"/").concat(e,"/").concat(t),n,this.enhance)}},{key:"sendCustomEventWithEncodedUrl",value:function(e,t,n){var r="".concat(btoa("".concat(this.serviceName,"/").concat(e,"/").concat(t))),i="".concat(this.endpoint,"/grp/v1/encoded/").concat(this.env,"/").concat(r);return T(i,n,this.enhance)}}]),e}(),A=N},182:function(e,t,n){"use strict";var r=n(39),i=n(40),a=n(7),o=n(0),s="grp/v1/custom/public/saddlebag-event-logger/FrontendEventMessage/generic.FrontendEventMessage",u=function(){function e(){Object(r.a)(this,e),this.$window=o.a.getWindow(),this.$window.__internal&&this.$window.__internal.EventTracker||(this.$window.__internal=this.$window.__internal||{},this.$window.__internal.EventTracker={maxEvents:10,sentEvents:0});var t=this.$window.__internal.EventTracker.maxEvents;this.maxEvents=t,Object(o.f)()?this.endpoint="".concat("/slipstream","/").concat(s):this.endpoint="".concat("https://slipstream.skyscanner.net","/").concat(s)}return Object(i.a)(e,[{key:"track",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"not_set";if(!(this.$window.__internal.EventTracker.sentEvents>=this.maxEvents)){if(!e||!t)throw Error("EventTracker: name and component must be set, got '".concat(e,"' and '").concat(t,"' instead."));if("number"!==typeof i)throw Error("EventTracker: value must be a number, got '".concat(typeof i,"' instead."));var s=JSON.stringify({name:e,component:t,version:n,value:i,page_name:o}),u={method:"POST",headers:{"Content-Type":"application/json"},body:s};return this.$window.__internal.EventTracker.sentEvents+=1,Object(a.a)(this.endpoint,u).catch((function(e){console.error("".concat(e,". Request to ").concat(r.endpoint," failed. Request payload: ").concat(s,"."))}))}console.warn("EventTracker: Event ignored, maximum number of events (".concat(this.maxEvents,") already logged."))}}]),e}(),c=new u;t.a=function(e,t,n,r,i){c.track(e,t,n,r,i)}},188:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=e[s]}i.default=e,n&&n.set(e,i);return i}(n(108));function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e,t){return e&&t?function(e,t){var n=t.map((function(e){var t=o(e.split("="),2);return{key:t[0],value:t[1]}})).filter((function(t){return t.key===e&&null!==t.value}));return n.length>0?n[0].value:null}(e,t.split(i.COOKIE_SEPARATOR).map((function(e){return e.trim()}))):null};t.default=u},189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(190)),i=a(n(191));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modified=!1,this._cookieObject=(0,r.default)(t)||{}}var t,n,a;return t=e,(n=[{key:"getValue",value:function(e){return this._cookieObject[e]}},{key:"setValue",value:function(e,t){return this._cookieObject[e]=t,this._modified=!0,this}},{key:"deleteValue",value:function(e){return delete this._cookieObject[e],this._modified=!0,this}},{key:"clear",value:function(){return this._cookieObject={},this._modified=!0,this}},{key:"isModified",value:function(){return this._modified}},{key:"keys",value:function(){return Object.keys(this._cookieObject)}},{key:"serializeToString",value:function(){return(0,i.default)(this._cookieObject)}}])&&o(t.prototype,n),a&&o(t,a),e}();t.default=s},190:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=e[s]}i.default=e,n&&n.set(e,i);return i}(n(108));function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){if(!e||"string"!==typeof e)return null;var t=e.split(i.PAIR_SEPARATOR),n={};return t.forEach((function(e){if(-1!==e.indexOf(i.KEY_VALUE_SEPARATOR)){var t=o(e.split(i.KEY_VALUE_SEPARATOR),2),r=t[0],a=t[1];n[r]=decodeURIComponent(a)}else n[e]=null})),n}},191:function(e,t,n){"use strict";function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return"";if("string"===typeof e)return e;var t=Object.keys(e);if(0===t.length)return"";return t.map((function(t){return function(e,t){return t?"".concat(e).concat(i.KEY_VALUE_SEPARATOR).concat(t):e}(t,e[t])})).reduce(o)};var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=e[s]}i.default=e,n&&n.set(e,i);return i}(n(108));function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var o=function(e,t){return e?"".concat(e).concat(i.PAIR_SEPARATOR).concat(t):t}},229:function(e){e.exports=JSON.parse('{"name":"@skyscanner/session-validation","version":"1.0.42","description":"Library to validate and refresh the access tokens using the refresh token","main":"src/index.js","engines":{"node":"^12.10.0","npm":"^6.10.3"},"scripts":{"coverage":"react-scripts test --coverage","lint:js:staged":"eslint . --ignore-path .gitignore","lint:js":"eslint . --ignore-path .eslintignore --ext .js,.jsx","lint:js:fix":"eslint . --ignore-path .eslintignore --ext .js,.jsx --fix","lint:js:fix:staged":"eslint . --ignore-path .eslintignore --fix","lint":"npm run lint:js","test":"react-scripts test","precommit":"lint-staged"},"lint-staged":{"**/*.{js,jsx}":["npm run lint:js:staged --"]},"dependencies":{"saddlebag-browser":"^6.0.25","saddlebag-cookie":"^3.0.53","saddlebag-date":"^2.0.11","saddlebag-event-tracking":"^3.0.33","saddlebag-grappler":"^2.3.40","saddlebag-localstorage":"^3.0.50","saddlebag-observer":"^3.0.24","saddlebag-user-tracking-events":"^2.1.11"},"devDependencies":{"ensure-node-env":"^1.0.8","eslint-config-skyscanner":"^10.4.0","eslint-plugin-skyscanner-dates":"^1.0.9","husky":"^4.0.0","jest-fetch-mock":"^1.7.5","lint-staged":"^7.1.2"},"publishConfig":{"registry":"https://artifactory.skyscannertools.net/artifactory/api/npm/npm/"},"keywords":["mshell","library","node"],"files":["src"],"author":"Diamond","license":"UNLICENSED","bugs":{"email":"DiamondSquad@skyscanner.net"},"homepage":"https://github.skyscannertools.net/identity/auth-libs/tree/master/packages/session-validation","backpack-react-scripts":{"babelIncludePrefixes":["@skyscanner/","@identity/"]},"gitHead":"3c7dd5db1b0b02c463ad09806cc687782b393a15"}')},230:function(module,exports,__webpack_require__){"use strict";function decycle(e){var t=[],n=[];return function e(r,i){var a,o,s,u=r&&r.toJSON instanceof Function?r.toJSON():r;if("object"===typeof u&&null!==u){for(a=0;a<t.length;a+=1)if(t[a]===u)return{$ref:n[a]};if(t.push(u),n.push(i),"[object Array]"===Object.prototype.toString.apply(u))for(s=[],a=0;a<u.length;a+=1)s[a]=e(u[a],i+"["+a+"]");else for(o in s={},u)Object.prototype.hasOwnProperty.call(u,o)&&(s[o]=e(u[o],i+"["+JSON.stringify(o)+"]"));return s}return u}(e,"$")}function retrocycle($){var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"===typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"===typeof item&&(path=item.$ref,"string"===typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"===typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"===typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$}module.exports={stringify:function(e,t,n){return JSON.stringify(decycle(e),t,n)},parse:function(e,t){return retrocycle(JSON.parse(e,t))},decycle:decycle,retrocycle:retrocycle}},231:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseCookie",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"parseMultiValueCookie",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"buildCookieObject",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"serializeToString",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"MultiValueCookie",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"COOKIES",{enumerable:!0,get:function(){return u.COOKIES}}),t.default=void 0;var r=c(n(232)),i=c(n(233)),a=c(n(190)),o=c(n(191)),s=c(n(189)),u=n(108);function c(e){return e&&e.__esModule?e:{default:e}}var l=r.default;t.default=l},232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(188))&&r.__esModule?r:{default:r};var a=function(e,t){var n=(0,i.default)(e,t);return n&&"string"===typeof n?n:null};t.default=a},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.default)(e,t);return n?new r.default(n):null};var r=a(n(189)),i=a(n(188));function a(e){return e&&e.__esModule?e:{default:e}}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return p}));var r=n(5),i=n(9),a=(n(36),n(43)),o=n(52),s=n.n(o),u=n(38),c=["bold","children","className","tagName","textStyle","weight"],l=Object(a.a)(s.a),f={xs:"xs",sm:"sm",base:"base",lg:"lg",xl:"xl",xxl:"xxl",xxxl:"xxxl",xxxxl:"xxxxl",xxxxxl:"xxxxxl",caption:"caption",footnote:"footnote",label1:"label-1",label2:"label-2",label3:"label-3",bodyDefault:"body-default",bodyLongform:"body-longform",subheading:"subheading",heading1:"heading-1",heading2:"heading-2",heading3:"heading-3",heading4:"heading-4",heading5:"heading-5",hero1:"hero-1",hero2:"hero-2",hero3:"hero-3",hero4:"hero-4",hero5:"hero-5"},p={regular:"regular",bold:"bold",black:"black"},h=function(e){var t=e.bold,n=e.children,a=e.className,o=e.tagName,s=e.textStyle,f=e.weight,h=Object(i.a)(e,c),d=function(e,t,n){return e||t===p.bold?p.bold:t===p.black&&n.match(/^x+l$/)?p.black:null}(t,f,s),v=l("bpk-text","bpk-text--".concat(s),d&&"bpk-text--".concat(d),a);return Object(u.jsx)(o,Object(r.a)(Object(r.a)({className:v},h),{},{children:n}))};h.defaultProps={textStyle:f.bodyDefault,tagName:"span",className:null,bold:null,weight:null};var d=h;t.c=d},52:function(e,t,n){e.exports={"bpk-text":"BpkText_bpk-text__MmFiM","bpk-text--xs":"BpkText_bpk-text--xs__ZjdjY","bpk-text--sm":"BpkText_bpk-text--sm__NDhlO","bpk-text--base":"BpkText_bpk-text--base__ZTNkM","bpk-text--lg":"BpkText_bpk-text--lg__YTM2Y","bpk-text--xl":"BpkText_bpk-text--xl__ZjY1Z","bpk-text--xxl":"BpkText_bpk-text--xxl__ZDg0Y","bpk-text--xxxl":"BpkText_bpk-text--xxxl__YjRjZ","bpk-text--xxxxl":"BpkText_bpk-text--xxxxl__M2JjM","bpk-text--xxxxxl":"BpkText_bpk-text--xxxxxl__ZDdkN","bpk-text--caption":"BpkText_bpk-text--caption__NDJkZ","bpk-text--footnote":"BpkText_bpk-text--footnote__OTRiM","bpk-text--label-1":"BpkText_bpk-text--label-1__YjYxY","bpk-text--label-2":"BpkText_bpk-text--label-2__YjExM","bpk-text--label-3":"BpkText_bpk-text--label-3__N2ZiY","bpk-text--body-default":"BpkText_bpk-text--body-default__MzczN","bpk-text--body-longform":"BpkText_bpk-text--body-longform__MDBmY","bpk-text--subheading":"BpkText_bpk-text--subheading__NzFhO","bpk-text--heading-1":"BpkText_bpk-text--heading-1__ZWYyZ","bpk-text--heading-2":"BpkText_bpk-text--heading-2__NjNiM","bpk-text--heading-3":"BpkText_bpk-text--heading-3__YmRjN","bpk-text--heading-4":"BpkText_bpk-text--heading-4__NTkyM","bpk-text--heading-5":"BpkText_bpk-text--heading-5__MGM3N","bpk-text--hero-1":"BpkText_bpk-text--hero-1__MmNjN","bpk-text--hero-2":"BpkText_bpk-text--hero-2__ZTNiM","bpk-text--hero-3":"BpkText_bpk-text--hero-3__Nzg1N","bpk-text--hero-4":"BpkText_bpk-text--hero-4__NDQ4N","bpk-text--hero-5":"BpkText_bpk-text--hero-5__NDY0O","bpk-text--bold":"BpkText_bpk-text--bold__NTA2M","bpk-text--black":"BpkText_bpk-text--black__ZDIzN","bpk-keyframe-spin":"BpkText_bpk-keyframe-spin__ZmU1O"}},54:function(e,t,n){"use strict";n.r(t),n.d(t,"getEnvFromUrl",(function(){return i}));var r=n(0),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a.getWindow(),t="".concat(e.location.protocol,"//").concat(e.location.hostname),n=-1!==t.indexOf("local");return n?"development":"production"};t.default=function(e){if("development"===e||"production"===e)return n(107)("./".concat(e)).config;throw new Error("Environment is required.")}},59:function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return r}));var r={baseUrl:"http://localhost:5002",eventPublishingEnabled:!1,retryInterval:15e3}},60:function(e,t,n){"use strict";n.r(t),n.d(t,"config",(function(){return r}));var r={baseUrl:"/g/traveller-auth-service",eventPublishingEnabled:!0,retryInterval:15e3}},62:function(e,t,n){"use strict";n.r(t);var r=n(59),i=n(60),a=n(54);describe("getConfig",(function(){it("should throw error when no env specified",(function(){expect((function(){return Object(a.default)({})})).toThrow()})),it("should return production config when specified",(function(){var e=Object(a.default)("production");expect(e).toEqual(i.config)})),it("should return development config when specified",(function(){var e=Object(a.default)("development");expect(e).toEqual(r.config)}))})),describe("getEnvFromUrl",(function(){it("returns development when running on local domain",(function(){expect(Object(a.getEnvFromUrl)({location:{protocol:"http",hostname:"localhost"}})).toEqual("development")})),it("returns production when not running on local domain",(function(){expect(Object(a.getEnvFromUrl)({location:{protocol:"https",hostname:"www.skyscanner.net"}})).toEqual("production")}))}))},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return c}));var r=function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n},i=function(){return new Date},a=function(e,t){return e&&t?Math.floor((e-t)/1e3):null},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-mm-dd",n=e.getFullYear(),r="0".concat(e.getMonth()+1).slice(-2),i="0".concat(e.getDate()).slice(-2);return"yyyy-mm"===t?"".concat(n,"-").concat(r):"".concat(n,"-").concat(r,"-").concat(i)},s=/[Z+-].*/;function u(e){return e.replace(s,"")}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return new Date;var t=e.split("T"),n=(t[0]||"").split("-"),r=(t[1]||"").split(":"),i=u(r[2]||"").split(".");return new Date(~~n[0],(~~n[1]||1)-1,~~n[2]||1,~~r[0],~~r[1],~~i[0],~~i[1])},l={getTimezoneOffset:function(e){return e.getTimezoneOffset()},wrapDate:function(e){return new Date(e)}}},80:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(39),i=n(40),a=n(0),o=function(){function e(t){Object(r.a)(this,e),this.DEFAULT_COOKIE_NAME="storageFallback",this.COOKIE_EXPIRY_VALUE=7776e6,this.sessionOnly=t,this.$document=a.a.getDocument()}return Object(i.a)(e,[{key:"getRawCookie",value:function(e){var t=this.$document.cookie.split(";").filter((function(t){return 0===t.trim().indexOf(e)}));if(!t.length)return{};var n=t[0].split("=");return 2!==n.length?null:JSON.parse(n[1])}},{key:"setRawCookie",value:function(e,t,n,r){var i="".concat(e,"=").concat(t);if(!n){var a=r;a||(a=new Date).setTime(a.getTime()+this.COOKIE_EXPIRY_VALUE),i+="; expires=".concat(a.toUTCString())}return this.$document.cookie=i,this.$document.cookie}},{key:"getItem",value:function(e){var t=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return t?JSON.stringify(t[e]):null}},{key:"setItem",value:function(e,t){var n=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return n?(n[e]=JSON.parse(t),this.setRawCookie(this.DEFAULT_COOKIE_NAME,JSON.stringify(n),this.sessionOnly)):null}},{key:"createOrUpdateCookie",value:function(e,t,n){return this.setRawCookie(e,t,!1,n)}}]),e}(),s="__initTest__",u="__initValue",c=function(){function e(t){Object(r.a)(this,e),this.namespace=t,this.browserStorage=null}return Object(i.a)(e,[{key:"getBrowserStorage",value:function(e,t){var n=function(){try{var e=a.a.getWindow(),t=e.localStorage,n=e.sessionStorage;t.setItem(s,u),n.setItem(s,u)}catch(r){return!1}return!0}(),r=a.a.getWindow();return this.browserStorage=n?t?r.sessionStorage:r.localStorage:e?new o(t):null,this.browserStorage}},{key:"tryGetValue",value:function(e,t,n){var r=this.getBrowserStorage(t,n);if(!r)return null;var i=r.getItem(this.namespace);if(!i)return null;if(i=JSON.parse(i),null==e)return i;for(var a=e.split("."),o=i,s=0;s<a.length;s+=1){if("undefined"===typeof(o=o[a[s]]))return null;if(s+1===a.length)return o}return null}},{key:"trySetValue",value:function(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.getBrowserStorage(n,r);if(!o)return null;try{i=(i=o.getItem(this.namespace))?JSON.parse(i):{}}catch(f){return!1}for(var s=e.split("."),u=i,c=0;c<s.length;c+=1){var l=s[c];if(!(l in u)){if(a)return!1;u[l]={}}if(c+1===s.length){a?delete u[l]:u[l]=t;try{return o.setItem(this.namespace,JSON.stringify(i)),!0}catch(f){return!1}}u=u[l]}return!1}},{key:"tryDeleteValue",value:function(e,t,n){return this.trySetValue(e,null,t,n,!0)}}]),e}(),l=c}}]);
//# sourceMappingURL=2.442d0ab8.chunk.js.map