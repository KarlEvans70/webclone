/*! For license information please see main.fc93d9ea.js.LICENSE.txt */
!function(e){function t(t){for(var r,o,i=t[0],a=t[1],s=0,u=[];s<i.length;s++)o=i[s],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);for(c&&c(t);u.length;)u.shift()()}var r={},n={109:0};function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,o){r=n[e]=[t,o]}));t.push(r[2]=i);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+"static/js/"+({0:"vendors~logi-bear-s2s-collector-logi-bear-s2s-collector~logi-bear-s2s-collector-logi-bear-s2s-collector-test",1:"common-redirect-skippyHotelUrls",2:"common-redirect-skippyHotelUrls-test",3:"common-utils-iataMappings",4:"common-utils-util",5:"common-utils-util-test",6:"criteo-criteo",7:"criteo-criteo-props-used",8:"criteo-criteo-test",9:"email-signup-widget-email-signup-widget",10:"email-signup-widget-email-signup-widget-props-used",11:"email-signup-widget-email-signup-widget-test",12:"facebook-dbook-flights-facebook-dbook-flights",13:"facebook-dbook-flights-facebook-dbook-flights-props-used",14:"facebook-dbook-flights-facebook-dbook-flights-test",15:"facebook-dbook-hotels-facebook-dbook-hotels",16:"facebook-dbook-hotels-facebook-dbook-hotels-props-used",17:"facebook-dbook-hotels-facebook-dbook-hotels-test",18:"facebook-facebookutils",19:"facebook-search-hotels-facebook-search-hotels",20:"facebook-search-hotels-facebook-search-hotels-props-used",21:"facebook-search-hotels-facebook-search-hotels-test",22:"facebook-view-hotels-facebook-view-hotels",23:"facebook-view-hotels-facebook-view-hotels-props-used",24:"facebook-view-hotels-facebook-view-hotels-test",25:"facebookredirect-facebookredirect",26:"facebookredirect-facebookredirect-props-used",27:"facebookredirect-facebookredirect-test",28:"facebooksearch-facebooksearch",29:"facebooksearch-facebooksearch-props-used",30:"facebooksearch-facebooksearch-test",31:"facebookview-facebookview",32:"facebookview-facebookview-props-used",33:"facebookview-facebookview-test",34:"gtag-common-conversion-markets",35:"gtag-common-generic-event-parameters",36:"gtag-common-generic-event-parameters-test",37:"gtag-common-gtag-init",38:"gtag-dbook-gtag-dbook",39:"gtag-dbook-gtag-dbook-props-used",40:"gtag-dbook-gtag-dbook-test",41:"gtag-dbook-hotels-gtag-dbook-hotels",42:"gtag-dbook-hotels-gtag-dbook-hotels-props-used",43:"gtag-dbook-hotels-gtag-dbook-hotels-test",44:"gtag-hotels-search-gtag-hotels-search",45:"gtag-hotels-search-gtag-hotels-search-props-used",46:"gtag-hotels-search-gtag-hotels-search-test",47:"gtag-hotels-view-gtag-hotels-view-props-used",48:"gtag-redirect-gtag-redirect",49:"gtag-redirect-gtag-redirect-props-used",50:"gtag-redirect-gtag-redirect-test",51:"gtag-search-gtag-search",52:"gtag-search-gtag-search-props-used",53:"gtag-search-gtag-search-test",54:"gtag-view-gtag-view",55:"gtag-view-gtag-view-props-used",56:"gtag-view-gtag-view-test",57:"logi-bear-s2s-collector-logi-bear-s2s-collector",58:"logi-bear-s2s-collector-logi-bear-s2s-collector-props-used",59:"logi-bear-s2s-collector-logi-bear-s2s-collector-test",60:"microsoftUetRedirect-microsoftUetRedirect",61:"microsoftUetRedirect-microsoftUetRedirect-props-used",62:"microsoftUetSearch-microsoftUetSearch",63:"microsoftUetSearch-microsoftUetSearch-props-used",64:"microsoftUetView-microsoftUetView",65:"microsoftUetView-microsoftUetView-props-used",66:"perimeterx-perimeterx",67:"perimeterx-perimeterx-props-used",68:"perimeterx-perimeterx-test",69:"propwatcher-expected-props",70:"propwatcher-propwatcher",71:"propwatcher-propwatcher-props-used",72:"propwatcher-propwatcher-test",73:"sat-register-sat-register",74:"sat-register-sat-register-props-used",75:"sat-register-sat-register-test",76:"sat-sat",77:"sat-sat-props-used",78:"sat-sat-test",79:"travel-audience-travel-audience",80:"travel-audience-travel-audience-props-used",81:"travel-audience-travel-audience-test",82:"usabilla-usabilla",83:"usabilla-usabilla-props-used",84:"vendors~logi-bear-s2s-collector-logi-bear-s2s-collector-test",85:"vendors~usabilla-usabilla",86:"yahoo-retargeting-yahoo-retargeting",87:"yahoo-retargeting-yahoo-retargeting-props-used",88:"yahoo-retargeting-yahoo-retargeting-test",89:"yandex-metrica-yandex-metrica",90:"yandex-metrica-yandex-metrica-props-used",91:"yandex-metrica-yandex-metrica-test",92:"criteo-__snapshots__-criteo-test-js-snap",93:"criteo-criteo-md",94:"email-signup-widget-email-signup-widget-md",95:"facebook-dbook-flights-facebook-dbook-flights-md",96:"facebook-dbook-hotels-facebook-dbook-hotels-md",97:"facebook-search-hotels-facebook-search-hotels-md",98:"facebook-view-hotels-facebook-view-hotels-md",99:"facebookredirect-facebookredirect-md",100:"facebooksearch-facebooksearch-md",101:"facebookview-facebookview-md",102:"gtag-dbook-gtag-dbook-md",103:"gtag-dbook-hotels-gtag-dbook-hotels-md",104:"gtag-hotels-search-gtag-hotels-search-md",105:"gtag-redirect-gtag-redirect-md",106:"gtag-search-gtag-search-md",107:"gtag-view-gtag-view-md",108:"logi-bear-s2s-collector-logi-bear-s2s-collector-md",110:"microsoftUetRedirect-microsoftUetRedirect-md",111:"microsoftUetSearch-microsoftUetSearch-md",112:"microsoftUetView-microsoftUetView-md",113:"perimeterx-perimeterx-md",114:"propwatcher-propwatcher-md",115:"sat-optional-extra-docs-md",116:"sat-register-optional-extra-docs-md",117:"sat-register-sat-register-md",118:"sat-sat-md",119:"travel-audience-travel-audience-md",120:"usabilla-usabilla-md",121:"yahoo-retargeting-yahoo-retargeting-md",122:"yandex-metrica-__snapshots__-yandex-metrica-test-js-snap",123:"yandex-metrica-yandex-metrica-md"}[e]||e)+"."+{0:"a7d1e402",1:"e5330bf3",2:"be96e497",3:"862c132e",4:"36889563",5:"76460458",6:"9f09489f",7:"6b6ed397",8:"a41f4489",9:"fdb07666",10:"14544b43",11:"54073b39",12:"1da507ab",13:"ecf4a0a5",14:"9d8678a5",15:"baa9c921",16:"6fefc753",17:"263c1ca4",18:"c39d2949",19:"29ec46a7",20:"d31c9de2",21:"9e31f396",22:"32a60605",23:"18ff6d0d",24:"2a3f2c20",25:"52520519",26:"72aac903",27:"edda21fa",28:"d8fe393a",29:"3db0439a",30:"d4c8479d",31:"2a502a12",32:"afce437b",33:"d0c6a3e2",34:"73a1c83f",35:"8a573674",36:"75e67d3e",37:"cda3c940",38:"29f14a8b",39:"709c3719",40:"65ebfd38",41:"2558a2dd",42:"4f6b784f",43:"2364d8fa",44:"dac9ec5c",45:"9bef1191",46:"8eedac47",47:"0721b012",48:"2b3f55ef",49:"a8f64423",50:"fdbe498f",51:"77adcc3f",52:"d37c7576",53:"b51ef572",54:"597a11b7",55:"1dc3b31b",56:"c66de54f",57:"e86f7c0e",58:"5e5a258b",59:"b5e53f03",60:"97b17695",61:"5c21e296",62:"edfc3e0b",63:"0b32a314",64:"2f4d2f0f",65:"4649c4f1",66:"f0d1e718",67:"14c4d3ca",68:"e2af9570",69:"03b4d5a5",70:"abaeb366",71:"e663931c",72:"6ec4d9b9",73:"7a51866f",74:"6586aecb",75:"e6e4061d",76:"cf4cb86d",77:"1b785ef0",78:"b56d0209",79:"8467bc92",80:"f84fb011",81:"a916da12",82:"4b6de016",83:"e3798239",84:"06ebdaee",85:"35c209f4",86:"07868b5d",87:"dc7f9090",88:"7a5ebc87",89:"e7eb2f38",90:"e4ea63b5",91:"95f8ecce",92:"9cad0007",93:"b4ae4ab7",94:"ae76fca4",95:"4f32d1d2",96:"7160a8e6",97:"9875ec4d",98:"e4890061",99:"11c6c315",100:"0f705788",101:"67276f96",102:"df4e05b8",103:"437c643e",104:"96ad8354",105:"1b0c3d1b",106:"c1e54c0e",107:"b0839be6",108:"c4d98835",110:"f048db42",111:"d593b270",112:"5bc985d9",113:"97dca9ee",114:"2d30abca",115:"6228d894",116:"03f77436",117:"3b3c063e",118:"6ac6608f",119:"35ed09db",120:"b774cc1e",121:"e63bb0a0",122:"fae76e22",123:"58018f1a"}[e]+".chunk.js"}(e),0!==s.src.indexOf(window.location.origin+"/")&&(s.crossOrigin="anonymous");var c=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(u);var r=n[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,r[1](c)}n[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var i=this.jsTagManagerJsonpCallback=this.jsTagManagerJsonpCallback||[],a=i.push.bind(i);i.push=t,i=i.slice();for(var s=0;s<i.length;s++)t(i[s]);var c=a;o(o.s=139)}([function(e,t,r){e.exports=r(131)},function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"b",(function(){return l})),r.d(t,"f",(function(){return f}));var n={getWindow:function(){return"undefined"!==typeof window?window:{}},getDocument:function(){return"undefined"!==typeof document?document:{}},getNavigator:function(){return"undefined"!==typeof navigator?navigator:{}}},o=function(e,t,r,o){var i=n.getDocument(),a=i.createElement("script");a.type=r||"text/javascript",a.async=!0,["anonymous","use-credentials"].indexOf(o)>-1&&(a.crossOrigin=o),t&&"function"===typeof t&&(a.onload=t),0===e.indexOf("//")||0===e.indexOf("http")?a.src=e:a.src=("https:"===i.location.protocol?"https://":"http://")+i.location.host+e;var s=i.getElementsByTagName("script")[0];s.parentNode.insertBefore(a,s)},i=function(){return n.getNavigator().userAgent},a=function(){var e=n.getWindow(),t=n.getDocument(),r=t.documentElement,o=t.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||o.clientWidth,height:e.innerHeight||r.clientHeight||o.clientHeight}};var s=!1,c=function(e){var t=n.getWindow();s?t.setTimeout((function(){return e()}),0):t.addEventListener?t.addEventListener("load",e,!1):t.attachEvent&&t.attachEvent("onload",e)};c((function(){s=!0}));var u,l=c,f=(r(32),r(7),n.getWindow(),function(){if("undefined"===typeof u)try{var e=n.getDocument().getElementById("trackolding-sync"),t=JSON.parse(e.getAttribute("data-data"));u="undefined"===typeof t.useAkamaiSlipstream||!0===t.useAkamaiSlipstream}catch(r){console.warn("Could not get Trackolding data, will use Akamai Slipstream endpoint"),u=!0}return u})},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(6);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},function(e,t,r){"use strict";function n(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(u){return void r(u)}s.done?t(c):Promise.resolve(c).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,c,"next",e)}function c(e){n(a,o,i,s,c,"throw",e)}s(void 0)}))}}r.d(t,"a",(function(){return o}))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}r.d(t,"a",(function(){return o}))},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";var n={},o={},i=function(){if("undefined"!==typeof window)if(window.Sb||(window.Sb={}),window.Sb.ObserverMemory){var e=window.Sb.ObserverMemory;n=e.queued,o=e.topicSubscriptions}else n={},o={},window.Sb.ObserverMemory={queued:n,topicSubscriptions:o}},a=function(e){var t=o[e];if(t&&t.length){var r=n[e];if(r&&r.length)for(var i=0,a=r.length;i<a;i++)for(var s=r[i],c=0,u=t.length;c<u;c++){!function(t,r){setTimeout((function(){try{if(r.received.indexOf(t.publishId)<0){var n=r.fn.apply(r.context,[t.data]);r.received.push(t.publishId),t.handler&&t.handler.apply(n)}}catch(o){throw new Error("An error occured while handling event topic '".concat(e,"'. Error: ").concat(o.stack||o))}}),0)}(s,t[c])}}},s={subscribe:function(e,t,r){return o[e]||(o[e]=[]),o[e].push({fn:t,context:r||undefined,received:[]}),a(e),[e,t]}},c=0;s.publish=function(e,t,r){var o=1e4*Math.floor(1e6*Math.random())+c++;return n[e]||(n[e]=[]),n[e].push({topic:e,data:t,publishId:o,handler:r}),a(e),s},s.unsubscribe=function(e){if(e){if(!Array.isArray(e))throw new Error("Invalid handle: ".concat(e));var t=e[0],r=e[1],n=o[t];if(!n)return s;for(var i=n.length;i--;)n[i].fn===r&&n.splice(i,1);return s}},s.wrap=function(e,t){Object.keys(t).forEach((function(r){s.subscribe("".concat(e).concat(r),t[r])}))},s.init=i,i(),t.a=s},function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return f})),r.d(t,"c",(function(){return p}));var n=r(4),o=r(5),i=r(10),a=r.n(i),s=r(1),c=r(18),u=function(e){return Number.isInteger?Number.isInteger(e):"number"===typeof e&&isFinite(e)&&Math.floor(e)===e};function l(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.path,i=void 0===o?"/":o,s=n.secure,c=void 0===s||s;if(null==r)a.a.set(e,t,{path:i,secure:c});else{if(!u(r))throw new Error("Expires parameter needs to be an integer.");a.a.set(e,t,{expires:r,path:i,secure:c})}}var f=function(){function e(t){Object(n.a)(this,e),this.name=t;var r=s.a.getDocument().cookie;this.cookie=Object(c.parseMultiValueCookie)(t,r),this.cookie||(this.cookie=new c.MultiValueCookie({}))}return Object(o.a)(e,[{key:"getValue",value:function(e){return this.cookie.getValue(e)}},{key:"setValue",value:function(e,t){return this.cookie.setValue(e,t),this}},{key:"deleteValue",value:function(e){return this.cookie.deleteValue(e),this}},{key:"keys",value:function(){return this.cookie.keys()}},{key:"clear",value:function(){return this.cookie.clear(),this}},{key:"getRawValue",value:function(){return this.cookie.serializeToString()}},{key:"store",value:function(e,t){return l(this.name,this.cookie.serializeToString(),e,t),this}},{key:"remove",value:function(){a.a.remove(this.name)}}]),e}(),d=function(){function e(t){Object(n.a)(this,e),this.name=t,this.cookieValue=a.a.get(t)}return Object(o.a)(e,[{key:"getValue",value:function(){return this.cookieValue}},{key:"setValue",value:function(e){return this.cookieValue=e,this}},{key:"store",value:function(e,t){return l(this.name,this.cookieValue,e,t),this}},{key:"storeByDate",value:function(e,t){return function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.path,i=void 0===o?"/":o,s=n.secure,c=void 0===s||s;if(!r||"object"!==typeof r||!r.toUTCString)throw new Error("Expiration date must be a Date.");a.a.set(e,t,{expires:r,path:i,secure:c})}(this.name,this.cookieValue,e,t),this}},{key:"remove",value:function(){a.a.remove(this.name)}}]),e}(),p=function(e){var t="".concat(e,"=");return(s.a.getDocument().cookie||"").split(";").some((function(e){return e.indexOf(t)>=0}))}},function(e,t,r){"use strict";r.r(t),r.d(t,"getEnvFromUrl",(function(){return o}));var n=r(1),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.a.getWindow(),t="".concat(e.location.protocol,"//").concat(e.location.hostname),r=-1!==t.indexOf("local");return r?"development":"production"};t.default=function(e){if("development"===e||"production"===e)return r(136)("./".concat(e)).config;throw new Error("Environment is required.")}},function(e,t,r){var n,o;!function(i){if(void 0===(o="function"===typeof(n=i)?n.call(t,r,t,e):n)||(e.exports=o),!0,e.exports=i(),!!0){var a=window.Cookies,s=window.Cookies=i();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function r(n){function o(){}function i(t,r,i){if("undefined"!==typeof document){"number"===typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(r);/^[\{\[]/.test(a)&&(r=a)}catch(u){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+r+s}}function a(e,r){if("undefined"!==typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");r||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(n.read||n)(c,u)||t(c),r)try{c=JSON.parse(c)}catch(l){}if(o[u]=c,e===u)break}catch(l){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,r){i(t,"",e(r,{expires:-1}))},o.defaults={},o.withConverter=r,o}((function(){}))}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return St}));var n=r(4),o=r(5),i=r(1),a=function(){function e(t){Object(n.a)(this,e),this.DEFAULT_COOKIE_NAME="storageFallback",this.COOKIE_EXPIRY_VALUE=7776e6,this.sessionOnly=t,this.$document=i.a.getDocument()}return Object(o.a)(e,[{key:"getRawCookie",value:function(e){var t=this.$document.cookie.split(";").filter((function(t){return 0===t.trim().indexOf(e)}));if(!t.length)return{};var r=t[0].split("=");return 2!==r.length?null:JSON.parse(r[1])}},{key:"setRawCookie",value:function(e,t,r,n){var o="".concat(e,"=").concat(t);if(!r){var i=n;i||(i=new Date).setTime(i.getTime()+this.COOKIE_EXPIRY_VALUE),o+="; expires=".concat(i.toUTCString())}return this.$document.cookie=o,this.$document.cookie}},{key:"getItem",value:function(e){var t=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return t?JSON.stringify(t[e]):null}},{key:"setItem",value:function(e,t){var r=this.getRawCookie(this.DEFAULT_COOKIE_NAME);return r?(r[e]=JSON.parse(t),this.setRawCookie(this.DEFAULT_COOKIE_NAME,JSON.stringify(r),this.sessionOnly)):null}},{key:"createOrUpdateCookie",value:function(e,t,r){return this.setRawCookie(e,t,!1,r)}}]),e}(),s="__initTest__",c="__initValue",u=function(){function e(t){Object(n.a)(this,e),this.namespace=t,this.browserStorage=null}return Object(o.a)(e,[{key:"getBrowserStorage",value:function(e,t){var r=function(){try{var e=i.a.getWindow(),t=e.localStorage,r=e.sessionStorage;t.setItem(s,c),r.setItem(s,c)}catch(v){return!1}return!0}(),n=i.a.getWindow();return this.browserStorage=r?t?n.sessionStorage:n.localStorage:e?new a(t):null,this.browserStorage}},{key:"tryGetValue",value:function(e,t,r){var n=this.getBrowserStorage(t,r);if(!n)return null;var o=n.getItem(this.namespace);if(!o)return null;if(o=JSON.parse(o),null==e)return o;for(var i=e.split("."),a=o,s=0;s<i.length;s+=1){if("undefined"===typeof(a=a[i[s]]))return null;if(s+1===i.length)return a}return null}},{key:"trySetValue",value:function(e,t,r,n){var o,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.getBrowserStorage(r,n);if(!a)return null;try{o=(o=a.getItem(this.namespace))?JSON.parse(o):{}}catch(f){return!1}for(var s=e.split("."),c=o,u=0;u<s.length;u+=1){var l=s[u];if(!(l in c)){if(i)return!1;c[l]={}}if(u+1===s.length){i?delete c[l]:c[l]=t;try{return a.setItem(this.namespace,JSON.stringify(o)),!0}catch(f){return!1}}c=c[l]}return!1}},{key:"tryDeleteValue",value:function(e,t,r){return this.trySetValue(e,null,t,r,!0)}}]),e}(),l=u,f=r(2),d=r(3),p=r(0),h=r.n(p),g=r(16),b=r(8);function v(e){this.message=e}v.prototype=new Error,v.prototype.name="InvalidCharacterError";"undefined"!=typeof window&&window.atob&&window.atob.bind(window);function m(e){this.message=e}m.prototype=new Error,m.prototype.name="InvalidTokenError";var y=function(e,t){return new Promise((function(r,n){i.a.getWindow().fetch(e,t).then(r,n)}))},k="grp/v1/custom/public/saddlebag-event-logger/FrontendEventMessage/generic.FrontendEventMessage",w=function(){function e(){Object(n.a)(this,e),this.$window=i.a.getWindow(),this.$window.__internal&&this.$window.__internal.EventTracker||(this.$window.__internal=this.$window.__internal||{},this.$window.__internal.EventTracker={maxEvents:10,sentEvents:0});var t=this.$window.__internal.EventTracker.maxEvents;this.maxEvents=t,Object(i.f)()?this.endpoint="".concat("/slipstream","/").concat(k):this.endpoint="".concat("https://slipstream.skyscanner.net","/").concat(k)}return Object(o.a)(e,[{key:"track",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"not_set";if(!(this.$window.__internal.EventTracker.sentEvents>=this.maxEvents)){if(!e||!t)throw Error("EventTracker: name and component must be set, got '".concat(e,"' and '").concat(t,"' instead."));if("number"!==typeof o)throw Error("EventTracker: value must be a number, got '".concat(typeof o,"' instead."));var a=JSON.stringify({name:e,component:t,version:r,value:o,page_name:i}),s={method:"POST",headers:{"Content-Type":"application/json"},body:a};return this.$window.__internal.EventTracker.sentEvents+=1,y(this.endpoint,s).catch((function(e){console.error("".concat(e,". Request to ").concat(n.endpoint," failed. Request payload: ").concat(a,"."))}))}console.warn("EventTracker: Event ignored, maximum number of events (".concat(this.maxEvents,") already logged."))}}]),e}(),O=new w,j=function(e,t,r,n,o){O.track(e,t,r,n,o)},_=r(33),S=function(){function e(t){Object(n.a)(this,e),this.eventPublishingEnabled=t}return Object(o.a)(e,[{key:"publishMetric",value:function(e){this.eventPublishingEnabled&&j(e,"login",_.version,1)}}]),e}(),E="csrfToken",x=function(){return new l("SID")},T=function(){function e(t,r){Object(n.a)(this,e),this.baseUrl=t,this.metricPublisher=r}return Object(o.a)(e,[{key:"validate",value:function(){var e=Object(d.a)(h.a.mark((function e(t,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.validateSession({body:{idleSeconds:t,clientTimeUtc:r},path:"tokens/validate"}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post({reason:t},"tokens/logout");case 2:if((r=e.sent).ok){e.next=6;break}throw this.metricPublisher.publishMetric("sid_logout_error"),new Error(r.statusText);case 6:return x().tryDeleteValue(E),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateSession",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var r,n,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.body,n=t.path,this.metricPublisher.publishMetric("sid_validate_session_attempt"),e.next=4,this.post(r,n);case 4:if((o=e.sent).ok){e.next=8;break}throw this.metricPublisher.publishMetric("sid_validate_session_error"),new Error(o.statusText);case 8:return e.next=10,o.json();case 10:return(i=e.sent).csrfToken&&(a=i.csrfToken,x().trySetValue(E,a,!1,!1)),this.metricPublisher.publishMetric("sid_validate_session_success"),e.abrupt("return",i);case 14:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(d.a)(h.a.mark((function e(t,r){var n,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"POST",headers:{"content-type":"application/json",accept:"application/json",pragma:"no-cache","cache-control":"no-cache"},cache:"no-store",credentials:"include",body:JSON.stringify(t)},o="".concat(this.baseUrl,"/").concat(r),e.next=4,fetch(o,n);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),A=function(){return new Date};var P="sid_validation_status",N="sid_validation_reason",R=new l("SID"),I=function(){return A().getTime()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return Math.floor(Math.random()*(t-e+1)+e)},U=function(e){return 1e3*e},V=function(e){var t=e.status,r=e.reason;R.trySetValue(P,t),R.trySetValue(N,r)},M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e);var r=t.events,o=void 0===r?["click","keydown","scroll","mousewheel","touchstart"]:r,i=t.namespace,a=void 0===i?"hyperdrive":i;if(this.localStorage=new l(a),this.events=o,this.started=!1,this.updateLocalStore=this.updateLocalStore.bind(this),this.clearLocalStore=this.clearLocalStore.bind(this),"undefined"===typeof window)throw new Error("window not available")}return Object(o.a)(e,[{key:"start",value:function(){this.started||(this.started=!0,this.updateLocalStore(),this.subscribe())}},{key:"stop",value:function(){this.started=!1,this.unsubscribe(),this.clearLocalStore()}},{key:"subscribe",value:function(){var e=this;this.events.forEach((function(t){return window.addEventListener(t,e.updateLocalStore,{passive:!0})}))}},{key:"unsubscribe",value:function(){var e=this;this.events.forEach((function(t){return window.removeEventListener(t,e.updateLocalStore,{passive:!0})}))}},{key:"updateLocalStore",value:function(){this.localStorage.trySetValue("sid-last-active",I(),!0,!1)}},{key:"clearLocalStore",value:function(){this.localStorage.tryDeleteValue("sid-last-active",!0,!1)}},{key:"getLastActivityTime",value:function(){return this.localStorage.tryGetValue("sid-last-active",!0,!1)||I()}},{key:"getIdleTimeMillis",value:function(){return I()-this.getLastActivityTime()}}]),e}(),L=M,D=r(9),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,e);var r=t.retryInterval,o=void 0===r?1e4:r;this.retryInterval=o,this.timeouts={}}return Object(o.a)(e,[{key:"schedulePersistent",value:function(e,t){var r=t.accessTokenExpiry-I()+C();this.schedule(e,r)}},{key:"scheduleTemporary",value:function(e,t){var r=t.sessionExpiry,n=t.maxIdleSeconds,o=r-I(),i=Math.min(o,U(n))+C();this.schedule(e,i)}},{key:"scheduleRetry",value:function(e){this.schedule(e)}},{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.retryInterval;this.timeouts.validate&&clearTimeout(this.timeouts.validate),this.timeouts.validate=setTimeout(e,t)}},{key:"cancel",value:function(){var e=this;Object.keys(this.timeouts).forEach((function(t){clearTimeout(e.timeouts[t])}))}}]),e}(),B=F,W=r(7),G=function(e,t){return new Promise((function(r,n){i.a.getWindow().fetch(e,t).then(r,n)}))},J=function(){return new Date};var q=function(e){return e.getTimezoneOffset()},H=r(34),K=r.n(H),$={EU_WEST_1:0,EU_CENTRAL_1:1,AP_SOUTHEAST_1:2,AP_NORTHEAST_1:3,UK1:64,UK2:65,NL1:66,SG1:67,HK1:68},Y={MILLI:0,SECOND:1,DAY:2,WEEK:4,MONTH:5,YEAR:6,ANYTIME:7,MINUTE:8},z=i.a.getWindow(),Z=function(e){return"".concat(e||"").trim()},X=function(e){if(!isFinite(e))return 0;for(var t=0,r=1,n=Math.pow(10,20);Math.round(e*r)/r!==e&&r<=n;){if(r>=n)return null;r*=10,t++}return t},Q=function(e){var t=null,r=isNaN(+e)?null:parseFloat(e);if(r&&"number"===typeof r&&!isNaN(r)){if((t={precision:X(r),amount:parseInt("".concat(r).replace(".",""),10)}).amount.toString().length>=10){var n=t.amount.toString().length-10;t.precision-=n,t.amount=parseInt(t.amount.toString().substring(0,10),10)}2147483647-t.amount<0&&(t.precision-=1,t.amount=parseInt(t.amount.toString().substring(0,9),10))}return t},ee=function e(t){if(!t)return t;var r=JSON.parse(K.a.stringify(t));return Object.keys(r).forEach((function(t){var n=r[t];(n&&(n.constructor===Object||n.constructor===Array)||"function"===typeof n)&&(r[t]=e(n)),function(e){return void 0===e||null===e||""===e||"object"===typeof e&&0===Object.keys(e).length||"number"===typeof e&&e!==+e}(n)&&delete r[t]})),Array.isArray(r)&&(r=r.filter(Boolean)),r},te=function(e,t,r){var n=null,o=0,i=function(e,t,r){var n=t,o=r,i=e||new Date,a=q(i),s=n&&q(n),c=o&&q(o);return{thisTZOffset:a,jan:n=s||q(new Date(i.getFullYear(),0,1)),jul:o=c||q(new Date(i.getFullYear(),6,1))}}(e,t,r),a=i.jan,s=i.jul,c=i.thisTZOffset;return a>s?(n=s,o=a-s):a<s&&(n=a,o=s-a),s!==a&&null!=n&&n===c?{DSTOffset:o,TZOffset:-1*c-o}:{DSTOffset:0,TZOffset:-1*c||0}},re=function(e){return isNaN(+e)?null:parseInt(e,10)},ne=function(e){return e&&"unknown"===e.toString().toLowerCase()?null:e},oe=function(e,t){if(!e)return null;if(e instanceof Date)return e;if("number"===typeof e)return new Date(e);if("string"===typeof e&&"YYYYMMDDHHmmss"===t)try{return new Date(e.slice(0,4),e.slice(4,6)-1,e.slice(6,8),e.slice(8,10),e.slice(10,12),e.slice(12,14))}catch(o){return null}if("string"===typeof e){var r,n=e.split(/[ZT:\\.\\//-]/);try{r=new Date(Date.UTC(n[0],n[1]-1||0,n[2]||1,n[3]||null,n[4]||null,n[5]||null))}catch(i){return null}return r instanceof Date&&!isNaN(r.valueOf())?r:null}return null},ie=function(e,t,r,n){var o=r||null,i=e;"string"===typeof e&&e&&4===e.length&&e.substring(2,4)<=12&&(i="20".concat(e));var a=oe(i,n);a&&"string"===typeof i&&!o&&(o=function(){switch(i.length){case 4:return"YEAR";case 6:case 7:return"MONTH";case 8:case 10:return"DAY";default:return"MILLI"}}()),a&&a instanceof Date&&!o&&(o="MILLI");var s={};if(a&&(s={unix_time_millis:a.getTime(),date_time_kind:Y[o]}),a&&a instanceof Date&&t){var c=te(a);s.timezone_offset_mins=c.TZOffset||0,s.daylight_savings_offset_mins=c.DSTOffset||0}return s.unix_time_millis||s.date_time_kind?ee(s):null},ae=function(e){return ne(e)?function(e){var t=/(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)/gi;return e&&t.test(e)?e.match(t)[0]:null}(e):null},se=function(){var e=Object(i.d)(),t=e.width*e.width+e.height*e.height,r=Math.round(Math.sqrt(t)/72*10)/10,n=z.screen||{};return{usable_width:e.width,usable_height:e.height,display_width:n.width,display_height:n.height,display_ppi:n.pixelDepth,diag_in_inches:r,device_pixel_ratio:z.device_pixel_ratio||null}},ce=function(e,t){var r,n=e||{},o=n.authState,i=n.componentContext,a=n.config,s=n.gaCookie,c=n.guid,u=n.nav,l=n.nodeName,f=n.preferences,d=n.scaffoldVersion,p=n.screen,h=n.ssTrack,g=n.utid,b={};try{b.produced_by=2,b.producer_version=d,b.service_instance_fingerprint=function(e){var t=e.identifier,r=e.nodeName,n=e.version,o=e.version_identifier,i=r&&r.length>=8?r.substring(5,8):null,a=e.dc;return ee({data_center:void 0===a?$[i]:a,name:r,version_tag:n,version_identifier:o,identifier:t})}({version:d,nodeName:l}),b.traveller_identity=function(e,t,r,n,o){var i=!1;-1===[2,1,0].indexOf(Number(t))&&(i=!0);var a=/.+\..+\.(.+.\..+)$/.exec(o),s={utid:e,user_status:i?"0":t.toString(),authentication_status:re(t),preference_string:Z(r),sstrack:n,ga_cid:a&&a.length>1?a[1]:null};return ee(s)}(g,o,f,h,s),b.client_details=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:se(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.navigator,n={user_agent:r.userAgent,vendor_name:r.vendor,browser_name:ne(e.browserName)||r.appName,browser_version:ne(e.browserVersion)||r.appVersion,is_browser:ne(e.desktop),display_height:re(t.display_height),display_width:re(t.display_width),display_ppi:re(t.display_ppi),usable_display_width:re(t.usable_width),usable_display_height:re(t.usable_height),diagonal_screen_size_int:Q(t.diag_in_inches),device_pixel_ratio_int:Q(t.device_pixel_ratio)||null,ip_address:ae(e.ipAddress),is_mobilephone:ne(e.mobile),is_tablet:ne(e.tablet),os_version:ne(e.osVersion)};return document.referrer&&(n.referrer_url=document.referrer),ee(n)}(i,p,u),b.traveller_culture_settings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ee({country:e.market,currency:e.currency,locale:e.locale})}(i),b.ab_tests=ee(a&&a.featureTests||null),b.created_on=ie(new Date(Date.now()),!0),b.associate_id=(r=i&&i.associateId||null,ne(r)?function(e){var t=/([a-z]{3}[_][a-z]{3}[_][0-9]{5}[_][0-9]{5})/i;return e&&t.test(e)?e.match(t)[0].toUpperCase():"DIR_ECT_00000_00000"}(r):null),b.guid=c||function(){for(var e=[],t=0;t<36;)e[t]=Math.floor(16*Math.random()),t+=1;e[14]=4,e[19]=3&e[19]|8;for(var r=0;r<36;)e[r]="0123456789abcdef"[e[r]],r+=1;return e[8]=e[13]=e[18]=e[23]="-",e.join("")}()}catch(v){if(!t)throw v}return b},ue="https://slipstream.skyscanner.net",le="/slipstream",fe=function(e,t,r){var n;if(r){var o=Object(f.a)(Object(f.a)({},t),{},{event_header:ce()});n=JSON.stringify(o)}else n=JSON.stringify(t);return G(e,{method:"POST",body:n,headers:{"Content-Type":"application/json"}}).catch((function(t){console.error("".concat(t,". Request to ").concat(e," failed. Request payload: ").concat(n,"."))}))},de=function(){function e(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.enhance,s=void 0===a||a;if(Object(n.a)(this,e),"public"!==t&&"public-sandbox"!==t)throw new Error('GrapplerLogger environment must be "public" or "public-sandbox"');this.env=t,this.serviceName=r,this.enhance=s,this.endpoint=Object(i.f)()?le:ue}return Object(o.a)(e,[{key:"sendApplogMessage",value:function(e){var t="".concat(this.endpoint,"/grp/v1/applog/").concat(this.env,"/").concat(this.serviceName);return fe(t,e,this.enhance)}},{key:"sendCustomEvent",value:function(e,t,r){var n="".concat(this.endpoint,"/grp/v1/custom/").concat(this.env,"/").concat(this.serviceName,"/").concat(e,"/").concat(t);return fe(n,r,this.enhance)}},{key:"sendCustomEvents",value:function(e,t,r){return function(e,t,r){var n=t.reduce((function(e,t){return e+(r?JSON.stringify(Object(f.a)(Object(f.a)({},t),{},{event_header:ce()})):JSON.stringify(t))}),"");return G(e,{method:"POST",body:n,headers:{"Content-Type":"application/json"}}).catch((function(t){console.error("".concat(t,". Request to ").concat(e," failed. Request payload: ").concat(n,"."))}))}("".concat(this.endpoint,"/grp/v1/custom/").concat(this.env,"/").concat(this.serviceName,"/").concat(e,"/").concat(t),r,this.enhance)}},{key:"sendCustomEventWithEncodedUrl",value:function(e,t,r){var n="".concat(btoa("".concat(this.serviceName,"/").concat(e,"/").concat(t))),o="".concat(this.endpoint,"/grp/v1/encoded/").concat(this.env,"/").concat(n);return fe(o,r,this.enhance)}}]),e}(),pe=de,he=r(6),ge=function(e){return function(e){return null==e||void 0===e}(e)?"undefined":e.toString()},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,r){return Object(f.a)(Object(f.a)({},t),{},Object(he.a)({},r,ge(e[r])))}),{})},ve=function(){function e(t){var r=t.authConsumer;Object(n.a)(this,e),this.grapplerLogger=new pe("public","login"),this.authConsumer=r}return Object(o.a)(e,[{key:"publishEvent",value:function(e,t){try{var r=this.authConsumer,n=be(t);this.grapplerLogger.sendApplogMessage({message:e,severity:"INFO",fields:Object(f.a)({authConsumer:r,market:"unknown"},n)})}catch(v){}}},{key:"publishError",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{var n=this.authConsumer,o=t.name,i=t.message,a=t.stack,s=t.errorCode,c=be(r);this.grapplerLogger.sendApplogMessage({message:e,severity:"ERR",fields:Object(f.a)({authConsumer:n,market:"unknown"},c),exception:{type:o,traceback:a,message:i||s}})}catch(v){}}}]),e}(),me=function(){function e(t){var r=t.applogPublisher;Object(n.a)(this,e),this.applogPublisher=r}return Object(o.a)(e,[{key:"publishLogoutSuccess",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.utid,e.prev=1,n=new St("public","logout"),e.next=5,n.track("clients.AuthenticationStatusChange",{previous_traveller_identity:{utid:r,authentication_status:"AUTHENTICATED"}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this.applogPublisher.publishError("Failed to send AuthenticationStatusChange funnel event",e.t0);case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ye="Logout",ke="Session Validation Error",we=function(){function e(t){var r=t.authConsumer;Object(n.a)(this,e),this.applogPublisher=new ve({authConsumer:r}),this.trustedFunnelPublisher=new me({applogPublisher:this.applogPublisher}),this.authConsumer=r}return Object(o.a)(e,[{key:"publishLogoutSuccess",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,r,n,o,i,a,s,c=this,u=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.length>0&&void 0!==u[0]?u[0]:{},r=t.cause,n=t.utid,o=t.sessionType,i=t.platformId,a=t.reason,s="".concat(ye," Succeeded"),this.swallowErrors(s,(function(){c.applogPublisher.publishEvent(s,{cause:r,utid:n,sessionType:o,platformId:i,reason:a}),W.a.publish("sid-logout-success",{cause:r}),c.trustedFunnelPublisher.publishLogoutSuccess({utid:n})}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"publishSessionValidationError",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,r,n,o,i=this,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.utid,n=t.authError,o=ke,this.swallowErrors(o,(function(){i.applogPublisher.publishError(o,n,{utid:r}),W.a.publish("sid-session-validation-error",n.errorMessage)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"swallowErrors",value:function(e,t){try{t()}catch(v){this.applogPublisher.publishError("".concat(e," Event Publishing Error"),v)}}}]),e}(),Oe="sid_lock",je="TIMED_OUT",_e="COMPLETED_BY_OTHER_TAB",Se=function(){return parseInt(R.tryGetValue(Oe),10)},Ee=function(){},xe=function(){window.removeEventListener("storage",Ee)},Te=function(e){return new Promise((function(t){var r=setTimeout((function(){return t(je)}),e);xe(),Ee=function(e){e.key===Oe&&null===e.newValue&&(clearTimeout(r),t(_e))},window.addEventListener("storage",Ee)}))},Ae=function(){var e=Object(d.a)(h.a.mark((function e(){var t,r,n,o,i,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[Se(),A().getTime()],r=t[0],n=t[1];case 1:if(!(n<r&&o!==_e)){e.next=11;break}return i=r-n,e.next=5,Te(i);case 5:o=e.sent,a=[Se(),A().getTime()],r=a[0],n=a[1],e.next=1;break;case 11:return xe(),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=function(){var e=A().getTime();R.trySetValue(Oe,e+5e3)},Ne=function(){var e=Object(d.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae();case 2:if(e.sent===_e){e.next=10;break}return Pe(),e.next=7,t();case 7:return r=e.sent,R.tryDeleteValue(Oe),e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re="PERSISTENT",Ie="TEMPORARY",Ce="MOBILE",Ue="INVALID",Ve=function(e){return"https://skyscanner.net/".concat(e)},Me=function(){try{var e=new b.b("sid_session_token").getValue();if(!e)return{};var t=e.split(".")[1];return JSON.parse(window.atob(t))}catch(r){return{}}},Le=function(){try{var e=Me(),t=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me())[Ve("sessionType")]}(e),r=new b.b("sid_utid").getValue();switch(t){case Re:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:Re,accessTokenExpiry:e[Ve("accessTokenExpiry")],accessTokenExpiryDate:new Date(e[Ve("accessTokenExpiry")])})}(e);case Ie:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:Ie,maxIdleSeconds:e[Ve("maxIdleSeconds")],sessionExpiry:e[Ve("sessionExpiry")],sessionExpiryDate:new Date(e[Ve("sessionExpiry")])})}(e);case Ce:return function(e){return Object.freeze({utid:e.sub,start:e.iat,sessionType:Ce})}(e);default:return r?Object.freeze({sessionType:Ue}):void 0}}catch(n){return}};function De(e,t){return De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},De(e,t)}function Fe(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}function We(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(v){return!1}}function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Je(e,t){if(t&&("object"===Ge(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qe(e){var t=We();return function(){var r,n=Be(e);if(t){var o=Be(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Je(this,r)}}function He(e,t,r){return He=We()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&De(o,r.prototype),o},He.apply(null,arguments)}function Ke(e){var t="function"===typeof Map?new Map:void 0;return Ke=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return He(e,arguments,Be(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),De(n,e)},Ke(e)}var $e=function(e){Fe(r,e);var t=qe(r);function r(e){var o,i=e.errorCode,a=e.errorMessage,s=e.traceback;return Object(n.a)(this,r),(o=t.call(this)).errorCode=i,o.errorMessage=a,o.traceback=s,o}return Object(o.a)(r)}(Ke(Error)),Ye="session-inactive",ze="session-expired",Ze=function(){function e(){Object(n.a)(this,e);var t=Object(D.getEnvFromUrl)(),r=Object(D.default)(t),o=r.baseUrl,i=r.eventPublishingEnabled,a=r.retryInterval;this.metricPublisher=new S(i),this.validateSessionClient=new T(o,this.metricPublisher),this.activityTracker=new L,this.eventPublisher=new we({authConsumer:"session-validation"}),this.scheduler=new B({retryInterval:a}),this.validationErrorCounter={},this.checkPersistentSession=this.checkPersistentSession.bind(this),this.stop=this.stop.bind(this),this.restart=this.restart.bind(this),this.checkTempSession=this.checkTempSession.bind(this),this.publishSessionValidationError=this.publishSessionValidationError.bind(this)}return Object(o.a)(e,[{key:"getValidatedSession",value:function(){return this.promise||(this.promise=this.validateSession()),this.promise}},{key:"stop",value:function(){this.scheduler.cancel(),this.activityTracker.stop(),this.promise=void 0,this.session=void 0}},{key:"restart",value:function(){this.stop(),this.promise=this.validateSession()}},{key:"validateSession",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Le())||t.sessionType!==Ue){e.next=5;break}return e.next=4,this.validateSessionClient.logout("session-invalid");case 4:return e.abrupt("return",void 0);case 5:if(this.session=t,!(this.session&&this.session.sessionType!==Ce)){e.next=19;break}this.activityTracker.start(),e.t0=this.session.sessionType,e.next=e.t0===Re?12:e.t0===Ie?15:18;break;case 12:return e.next=14,this.checkPersistentSession();case 14:case 17:case 18:return e.abrupt("break",19);case 15:return e.next=17,this.checkTempSession();case 19:return e.abrupt("return",this.session);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleSessionValidation",value:function(e,t,r){var n,o=e.status,i=e.reason;switch(o){case"PERSISTENT_SESSION_REFRESHED":case"PERSISTENT_SESSION_EXTENDED":case"PERSISTENT_SESSION_NO_REFRESH":this.scheduler.schedulePersistent(this.checkPersistentSession,this.session);break;case"PERSISTENT_SESSION_LOGGED_OUT":n="inactive"===i?Ye:"session-logged-out",this._invalidateSession(n,t,r,i);break;default:this.stop()}}},{key:"_performRetry",value:function(e){var t=new $e({errorMessage:e.message,traceback:e.stack});this.publishSessionValidationError(e,t),this.scheduler.scheduleRetry(this.checkPersistentSession)}},{key:"_invalidateSession",value:function(e,t,r,n){this.eventPublisher.publishLogoutSuccess({cause:e,utid:t,sessionType:r,reason:n}),this.stop()}},{key:"publishSessionValidationError",value:function(e,t){var r=this.session.utid;this.validationErrorCounter[e.message]=this.validationErrorCounter[e.message]||0,this.validationErrorCounter[e.message]<5&&(this.validationErrorCounter[e.message]+=1,this.eventPublisher.publishSessionValidationError({utid:r,authError:t}))}},{key:"isSessionActive",value:function(){var e=U(this.session.maxIdleSeconds);return this.activityTracker.getIdleTimeMillis()<=e}},{key:"validatePersistentSession",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,r,n,o,i=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.activityTracker.getIdleTimeMillis(),t=a/1e3,r=I(),e.next=4,Ne(Object(d.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.validateSessionClient.validate(t,r);case 2:return n=e.sent,V(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))));case 4:return n=e.sent,o=null===n,e.abrupt("return",o?{status:R.tryGetValue(P),reason:R.tryGetValue(N)}:n);case 7:case"end":return e.stop()}var a}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkPersistentSession",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=this.session,r=t.utid,n=t.accessTokenExpiry,!(I()>n)){e.next=11;break}return e.next=6,this.validatePersistentSession();case 6:o=e.sent,this.session=Le(),this._handleSessionValidation(o,r),e.next=12;break;case 11:this.scheduler.schedulePersistent(this.checkPersistentSession,this.session);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this._performRetry(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"checkTempSession",value:function(){var e=Object(d.a)(h.a.mark((function e(){var t,r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.session,r=t.utid,n=t.sessionExpiry,o=t.sessionType,!(I()>n)){e.next=8;break}return e.next=5,this.validateSessionClient.logout(ze);case 5:this._invalidateSession(ze,r,o),e.next=15;break;case 8:if(this.isSessionActive()){e.next=14;break}return e.next=11,this.validateSessionClient.logout(Ye);case 11:this._invalidateSession(Ye,r,o),e.next=15;break;case 14:this.scheduler.scheduleTemporary(this.checkTempSession,this.session);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xe=function(){var e=Object(d.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.SessionValidator||(window.SessionValidator=new Ze),t=window.SessionValidator,e.next=3,t.getValidatedSession();case 3:return r=e.sent,e.abrupt("return",void 0!==r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=(Object.freeze({UNSET:0,UNAUTHENTICATED:1,AUTHENTICATED:2}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3,t=new Promise((function(t){setTimeout((function(){return t(!1)}),e)}));return Promise.race([Xe(),t])}),et=function(){var e=Le();return e&&e.utid||new b.b("traveller_context").getValue()},tt=function(){var e=new b.b("device_guid"),t=e.getValue();if(!t){var r=Object(g.v4)();return e.setValue(r),e.store(730),r}return t},rt={search_guid:["searchresultpage_guid","searchresultoption_guid","bookingpaneloption_guid","miniredirect_guid"],searchresultpage_guid:["searchresultoption_guid","bookingpaneloption_guid","miniredirect_guid"],searchresultoption_guid:["bookingpaneloption_guid","miniredirect_guid"],bookingpaneloption_guid:["miniredirect_guid"],miniredirect_guid:[]},nt=function(e){var t=e.messageGuid;return void 0===t||new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(t)},ot=function(e){return"".concat(e.split(".").pop().toLowerCase(),"_guid")},it=function(e){return"".concat(e.split(".").pop().toLowerCase,"_checksum")},at=function(e,t,r){e.trySetValue(t,r,!1,!0),(rt[t]||[]).forEach((function(t){e.tryDeleteValue(t)}))},st=function(){function e(t,r,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Object(n.a)(this,e),!o)throw new Error("A schema must be provided");if(!t)throw new Error("A namespaced store must be provided");this.$window=i.a.getWindow(),this.store=t,this.fallbackStore=r,this.schema=o,this.message=null,this.opts=a}return Object(o.a)(e,[{key:"getSeqNumber",value:function(){var e=(this.store.tryGetValue("sequence_num")||0)+1;return this.store.trySetValue("sequence_num",e),e}},{key:"buildHeader",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var r,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe();case 2:return r=e.sent,null==(n=this.store.tryGetValue(ot("clients.UserPreferences"),!1,!0))&&(n=this.fallbackStore.tryGetValue(ot("clients.UserPreferences"),!1,!0)),e.abrupt("return",{header:{guid:t,client_timestamp:ie(new Date(Date.now()),!0),traveller_identity:{utid:et(),authentication_status:r?"AUTHENTICATED":"UNAUTHENTICATED",preference_string:new b.b("preferences").getValue()},sequence_number:this.getSeqNumber(),device_guid:tt(),experiment_allocation_id:new b.b("experiment_allocation_id").getValue(),user_agent:this.$window.navigator?this.$window.navigator.userAgent:"UNKNOWN",user_preferences_guid:n}});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createAndStoreGuid",value:function(){var e=this.opts.messageGuid||Object(g.v4)(),t=ot(this.schema);return!1!==this.opts.store_guid&&at(this.store,t,e),e}},{key:"buildMessage",value:function(){var e=Object(d.a)(h.a.mark((function e(t){var r,n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createAndStoreGuid(),e.next=3,this.buildHeader(r);case 3:return n=e.sent,o=Object(f.a)(Object(f.a)({},n),t),this.message=o,e.abrupt("return",this.message);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){return this.message}}]),e}(),ct=st,ut=r(17),lt=function(e,t){return new Promise((function(r,n){i.a.getWindow().fetch(e,t).then(r,n)}))},ft=["component","message"],dt={ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug"},pt="https://slipstream.skyscanner.net",ht="grp/v1/applog/public",gt=function(e){return-1===e.hostname.indexOf("sandbox")&&-1===e.hostname.indexOf("pre-prod")&&-1===e.hostname.indexOf(".local")&&-1===e.hostname.indexOf("127.0.0.1")&&-1===e.hostname.indexOf("localhost")&&("80"===e.port||"443"===e.port||!e.port)},bt=function(e){var t=e.location,r=e.topicName,n=void 0===r?"web-browser":r;return gt(t)?Object(i.f)()?"".concat("/slipstream","/").concat(ht,"/").concat(n):"".concat(pt,"/").concat(ht,"/").concat(n):"".concat(pt,"/").concat("grp/v1/applog/public-sandbox","/").concat(n)},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1?arguments[1]:void 0,r=i.a.getWindow(),n=r.Skyscanner,o=r.location;t&&(r.topicName=t.topicName);var a=bt(r),s={message:e,fields:{pageName:n&&n.analyticsPageName||"unknown",location:o.href,level:dt.ERROR,userAgent:Object(i.c)(),deployColour:r.__trackolding&&r.__trackolding.deploy&&r.__trackolding.deploy.colour||"unknown",deployRegion:r.__trackolding&&r.__trackolding.deploy&&r.__trackolding.deploy.region||"unknown"}};Object.assign(s.fields,t),delete s.fields.message;var c=JSON.stringify(s);return gt(o)||(s.fields.level===dt.ERROR?console.error("saddlebag-logger:",s):s.fields.level===dt.WARN?console.warn("saddlebag-logger:",s):console.log("saddlebag-logger:",s)),lt(a,{method:"POST",headers:{"Content-Type":"application/json"},body:c}).catch((function(e){console.error("".concat(e,". Request to ").concat(a," failed. Request payload: ").concat(c,"."))}))},mt=function(e,t){var r=i.a.getWindow();r.newrelic&&r.newrelic.noticeError(e,t);var n=vt(e.message,t);return gt(r.location)||console.error(e),n},yt=function(e){var t=e.component,r=e.message,n=Object(ut.a)(e,ft),o=i.a.getWindow();return o.newrelic&&o.newrelic.noticeError(r||"unknown",Object(f.a)({component:t},n)),vt(r,e)},kt=function(){if((arguments.length<=0?void 0:arguments[0])instanceof Error){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];return mt(e,t)}if("string"===typeof(arguments.length<=0?void 0:arguments[0])||"number"===typeof(arguments.length<=0?void 0:arguments[0])||"boolean"===typeof(arguments.length<=0?void 0:arguments[0]))return yt({message:arguments.length<=0?void 0:arguments[0]});var r=(arguments.length<=0?void 0:arguments[0])||{};return yt(r)},wt=kt,Ot=dt,jt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ot.ERROR;wt({component:"saddlebag-user-tracking-events",message:e,level:r,event:t})},_t=function(){function e(t,r){Object(n.a)(this,e),this.grapplerLogger=new pe(t,r,{enhance:!1}),this.store=new l("eventstracking"),this.fallbackStore=new l("funnelevents")}return Object(o.a)(e,[{key:"trackEvent",value:function(){var e=Object(d.a)(h.a.mark((function e(t,r,n){var o,i,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=a.length>3&&void 0!==a[3]?a[3]:{},"object"===typeof n){e.next=3;break}throw new Error("message should be an Object");case 3:if(nt(o)){e.next=5;break}throw new Error("The specified guid is invalid. It must conform to ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$");case 5:return e.prev=5,i=new ct(this.store,this.fallbackStore,r,o),e.next=9,i.buildMessage(n);case 9:return this.grapplerLogger.sendCustomEvent(t,r,i.get()).catch((function(e){return jt(String(e),r,Ot.WARN)})),e.abrupt("return",{guid:i.get().header.guid});case 13:e.prev=13,e.t0=e.catch(5),jt(e.t0.message,r);case 16:return e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"trackBatchEvent",value:function(){var e=Object(d.a)(h.a.mark((function e(t,r,n){var o,i,a,s=this,c=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=c.length>3&&void 0!==c[3]?c[3]:{},nt(o)){e.next=3;break}throw new Error("The specified guid is invalid. It must conform to ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$");case 3:return e.prev=3,i=n.map((function(e,t){if("object"!==typeof e)throw new Error("message should be an Object");return new ct(s.store,s.fallbackStore,r,Object(f.a)(Object(f.a)({},o),{},{store_guid:o.store_guid===t})).buildMessage(e)})),e.next=7,Promise.all(i);case 7:return a=e.sent,this.grapplerLogger.sendCustomEvents(t,r,a).catch((function(e){return jt(String(e),r,Ot.WARN)})),e.abrupt("return",a.map((function(e){return{guid:e.header.guid}})));case 12:e.prev=12,e.t0=e.catch(3),jt(e.t0.message,r);case 15:return e.abrupt("return",{});case 16:case"end":return e.stop()}}),e,this,[[3,12]])})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"eventHasBeenLogged",value:function(e,t){var r=this.store.tryGetValue(it(e));if(!r)return!1;var n=JSON.parse(r);return!(n.logged_at<=J().getTime()-18e5)&&(delete n.logged_at,JSON.stringify(t)===JSON.stringify(n))}},{key:"markEventAsLogged",value:function(e,t){var r=Object(f.a)({logged_at:J().getTime()},t);this.store.trySetValue(it(e),JSON.stringify(r))}}]),e}(),St=function(e){Fe(r,e);var t=qe(r);function r(e,o){var i;return Object(n.a)(this,r),(i=t.call(this,e,o)).eventName="funnel_events",i}return Object(o.a)(r,[{key:"track",value:function(){var e=Object(d.a)(h.a.mark((function e(t,r){var n,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},e.abrupt("return",this.trackEvent(this.eventName,t,r,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"trackBatch",value:function(){var e=Object(d.a)(h.a.mark((function e(t,r){var n,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]?o[2]:{},e.abrupt("return",this.trackBatchEvent(this.eventName,t,r,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(_t)},function(e,t,r){"use strict";r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return b}));var n=r(2),o=r(1),i=r(7),a=function(e,t){return new Promise((function(r,n){o.a.getWindow().fetch(e,t).then(r,n)}))},s={ERROR:"error",WARN:"warn",INFO:"info",DEBUG:"debug"};i.a.init();var c="https://slipstream.skyscanner.net",u="grp/v1/applog/public",l=function(e){return-1===e.hostname.indexOf("sandbox")&&-1===e.hostname.indexOf("pre-prod")&&-1===e.hostname.indexOf(".local")&&-1===e.hostname.indexOf("127.0.0.1")&&-1===e.hostname.indexOf("localhost")&&("80"===e.port||"443"===e.port||!e.port)},f=function(e){var t=e.location,r=e.topicName,n=void 0===r?"web-browser":r;return l(t)?Object(o.f)()?"".concat("/slipstream","/").concat(u,"/").concat(n):"".concat(c,"/").concat(u,"/").concat(n):"".concat(c,"/").concat("grp/v1/applog/public-sandbox","/").concat(n)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1?arguments[1]:void 0,r=o.a.getWindow(),n=r.Skyscanner,i=r.location;t&&(r.topicName=t.topicName);var c=f(r),u={message:e,fields:{pageName:n&&n.analyticsPageName||"unknown",location:i.href,level:s.ERROR,userAgent:Object(o.c)(),deployColour:r.__trackolding&&r.__trackolding.deploy&&r.__trackolding.deploy.colour||"unknown",deployRegion:r.__trackolding&&r.__trackolding.deploy&&r.__trackolding.deploy.region||"unknown"}};Object.assign(u.fields,t),delete u.fields.message;var d=JSON.stringify(u);return l(i)||(u.fields.level===s.ERROR?console.error("saddlebag-logger:",u):u.fields.level===s.WARN?console.warn("saddlebag-logger:",u):console.log("saddlebag-logger:",u)),a(c,{method:"POST",headers:{"Content-Type":"application/json"},body:d}).catch((function(e){console.error("".concat(e,". Request to ").concat(c," failed. Request payload: ").concat(d,"."))}))},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.component)throw new Error("Component required");var t=e.message,r=e.component,n=d(t,e);return i.a.publish("app-log",{message:t,component:r}),n},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.component)throw new Error("Component required");return d(e.message,Object(n.a)(Object(n.a)({},e),{},{level:s.WARN,topicName:e.topicName}))},g=function(e,t){return h({component:"tag-manager",page:e.page,message:t})},b=function(e,t,r){return p({component:"tag-manager",page:e.page,message:r,error:"".concat(t.stack||t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COOKIES=t.KEY_VALUE_SEPARATOR=t.PAIR_SEPARATOR=t.COOKIE_SEPARATOR=void 0;t.COOKIE_SEPARATOR=";";t.PAIR_SEPARATOR="&";t.KEY_VALUE_SEPARATOR=":::";var n=Object.freeze({SCANNER:"scanner",CULTURE:"ssculture",AB:"ssab",AB_OVERRIDES:"ssaboverrides",AB_GROUP:"abgroup",TRAVELLER_CONTEXT:"traveller_context",ANONYMOUS_TOKEN:"__Secure-anon_token",ANONYMOUS_CSRF_TOKEN:"__Secure-anon_csrf_token",SID_TOKEN:"sid_token",SID_UTID:"sid_utid",SID_SESSION_TOKEN:"sid_session_token",GDPR:"gdpr",HAS_APP:"has_app",DEVICE_GUID:"device_guid",SECURE_SKA:"__Secure-ska",EXPERIMENT_ALLOCATION_ID:"experiment_allocation_id"});t.COOKIES=n},function(e,t,r){"use strict";r.r(t),r.d(t,"config",(function(){return n}));var n={baseUrl:"http://localhost:5002",eventPublishingEnabled:!1,retryInterval:15e3}},function(e,t,r){"use strict";r.r(t),r.d(t,"config",(function(){return n}));var n={baseUrl:"/g/traveller-auth-service",eventPublishingEnabled:!0,retryInterval:15e3}},function(e,t,r){var n=r(132),o=r(133),i=o;i.v1=n,i.v4=o,e.exports=i},function(e,t,r){"use strict";function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseCookie",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"parseMultiValueCookie",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"buildCookieObject",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"serializeToString",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"MultiValueCookie",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"COOKIES",{enumerable:!0,get:function(){return c.COOKIES}}),t.default=void 0;var n=u(r(134)),o=u(r(135)),i=u(r(27)),a=u(r(28)),s=u(r(26)),c=r(13);function u(e){return e&&e.__esModule?e:{default:e}}var l=n.default;t.default=l},function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(t,"a",(function(){return o}))},function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(13));function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e,t){return e&&t?function(e,t){var r=t.map((function(e){var t=a(e.split("="),2);return{key:t[0],value:t[1]}})).filter((function(t){return t.key===e&&null!==t.value}));return r.length>0?r[0].value:null}(e,t.split(o.COOKIE_SEPARATOR).map((function(e){return e.trim()}))):null};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(27)),o=i(r(28));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modified=!1,this._cookieObject=(0,n.default)(t)||{}}var t,r,i;return t=e,(r=[{key:"getValue",value:function(e){return this._cookieObject[e]}},{key:"setValue",value:function(e,t){return this._cookieObject[e]=t,this._modified=!0,this}},{key:"deleteValue",value:function(e){return delete this._cookieObject[e],this._modified=!0,this}},{key:"clear",value:function(){return this._cookieObject={},this._modified=!0,this}},{key:"isModified",value:function(){return this._modified}},{key:"keys",value:function(){return Object.keys(this._cookieObject)}},{key:"serializeToString",value:function(){return(0,o.default)(this._cookieObject)}}])&&a(t.prototype,r),i&&a(t,i),e}();t.default=s},function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(13));function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){s=!0,o=c}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){if(!e||"string"!==typeof e)return null;var t=e.split(o.PAIR_SEPARATOR),r={};return t.forEach((function(e){if(-1!==e.indexOf(o.KEY_VALUE_SEPARATOR)){var t=a(e.split(o.KEY_VALUE_SEPARATOR),2),n=t[0],i=t[1];r[n]=decodeURIComponent(i)}else r[e]=null})),r}},function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)return"";if("string"===typeof e)return e;var t=Object.keys(e);if(0===t.length)return"";return t.map((function(t){return function(e,t){return t?"".concat(e).concat(o.KEY_VALUE_SEPARATOR).concat(t):e}(t,e[t])})).reduce(a)};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(o,s,c):o[s]=e[s]}o.default=e,r&&r.set(e,o);return o}(r(13));function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var a=function(e,t){return e?"".concat(e).concat(o.PAIR_SEPARATOR).concat(t):t}},function(e,t,r){"use strict";r.r(t);var n=r(14),o=r(15),i=r(9);describe("getConfig",(function(){it("should throw error when no env specified",(function(){expect((function(){return Object(i.default)({})})).toThrow()})),it("should return production config when specified",(function(){var e=Object(i.default)("production");expect(e).toEqual(o.config)})),it("should return development config when specified",(function(){var e=Object(i.default)("development");expect(e).toEqual(n.config)}))})),describe("getEnvFromUrl",(function(){it("returns development when running on local domain",(function(){expect(Object(i.getEnvFromUrl)({location:{protocol:"http",hostname:"localhost"}})).toEqual("development")})),it("returns production when not running on local domain",(function(){expect(Object(i.getEnvFromUrl)({location:{protocol:"https",hostname:"www.skyscanner.net"}})).toEqual("production")}))}))},function(e,t,r){!function(){var t=r(124),n=r(20).utf8,o=r(125),i=r(20).bin,a=function e(r,a){r.constructor==String?r=a&&"binary"===a.encoding?i.stringToBytes(r):n.stringToBytes(r):o(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||r.constructor===Uint8Array||(r=r.toString());for(var s=t.bytesToWords(r),c=8*r.length,u=1732584193,l=-271733879,f=-1732584194,d=271733878,p=0;p<s.length;p++)s[p]=16711935&(s[p]<<8|s[p]>>>24)|4278255360&(s[p]<<24|s[p]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var h=e._ff,g=e._gg,b=e._hh,v=e._ii;for(p=0;p<s.length;p+=16){var m=u,y=l,k=f,w=d;u=h(u,l,f,d,s[p+0],7,-680876936),d=h(d,u,l,f,s[p+1],12,-389564586),f=h(f,d,u,l,s[p+2],17,606105819),l=h(l,f,d,u,s[p+3],22,-1044525330),u=h(u,l,f,d,s[p+4],7,-176418897),d=h(d,u,l,f,s[p+5],12,1200080426),f=h(f,d,u,l,s[p+6],17,-1473231341),l=h(l,f,d,u,s[p+7],22,-45705983),u=h(u,l,f,d,s[p+8],7,1770035416),d=h(d,u,l,f,s[p+9],12,-1958414417),f=h(f,d,u,l,s[p+10],17,-42063),l=h(l,f,d,u,s[p+11],22,-1990404162),u=h(u,l,f,d,s[p+12],7,1804603682),d=h(d,u,l,f,s[p+13],12,-40341101),f=h(f,d,u,l,s[p+14],17,-1502002290),u=g(u,l=h(l,f,d,u,s[p+15],22,1236535329),f,d,s[p+1],5,-165796510),d=g(d,u,l,f,s[p+6],9,-1069501632),f=g(f,d,u,l,s[p+11],14,643717713),l=g(l,f,d,u,s[p+0],20,-373897302),u=g(u,l,f,d,s[p+5],5,-701558691),d=g(d,u,l,f,s[p+10],9,38016083),f=g(f,d,u,l,s[p+15],14,-660478335),l=g(l,f,d,u,s[p+4],20,-405537848),u=g(u,l,f,d,s[p+9],5,568446438),d=g(d,u,l,f,s[p+14],9,-1019803690),f=g(f,d,u,l,s[p+3],14,-187363961),l=g(l,f,d,u,s[p+8],20,1163531501),u=g(u,l,f,d,s[p+13],5,-1444681467),d=g(d,u,l,f,s[p+2],9,-51403784),f=g(f,d,u,l,s[p+7],14,1735328473),u=b(u,l=g(l,f,d,u,s[p+12],20,-1926607734),f,d,s[p+5],4,-378558),d=b(d,u,l,f,s[p+8],11,-2022574463),f=b(f,d,u,l,s[p+11],16,1839030562),l=b(l,f,d,u,s[p+14],23,-35309556),u=b(u,l,f,d,s[p+1],4,-1530992060),d=b(d,u,l,f,s[p+4],11,1272893353),f=b(f,d,u,l,s[p+7],16,-155497632),l=b(l,f,d,u,s[p+10],23,-1094730640),u=b(u,l,f,d,s[p+13],4,681279174),d=b(d,u,l,f,s[p+0],11,-358537222),f=b(f,d,u,l,s[p+3],16,-722521979),l=b(l,f,d,u,s[p+6],23,76029189),u=b(u,l,f,d,s[p+9],4,-640364487),d=b(d,u,l,f,s[p+12],11,-421815835),f=b(f,d,u,l,s[p+15],16,530742520),u=v(u,l=b(l,f,d,u,s[p+2],23,-995338651),f,d,s[p+0],6,-198630844),d=v(d,u,l,f,s[p+7],10,1126891415),f=v(f,d,u,l,s[p+14],15,-1416354905),l=v(l,f,d,u,s[p+5],21,-57434055),u=v(u,l,f,d,s[p+12],6,1700485571),d=v(d,u,l,f,s[p+3],10,-1894986606),f=v(f,d,u,l,s[p+10],15,-1051523),l=v(l,f,d,u,s[p+1],21,-2054922799),u=v(u,l,f,d,s[p+8],6,1873313359),d=v(d,u,l,f,s[p+15],10,-30611744),f=v(f,d,u,l,s[p+6],15,-1560198380),l=v(l,f,d,u,s[p+13],21,1309151649),u=v(u,l,f,d,s[p+4],6,-145523070),d=v(d,u,l,f,s[p+11],10,-1120210379),f=v(f,d,u,l,s[p+2],15,718787259),l=v(l,f,d,u,s[p+9],21,-343485551),u=u+m>>>0,l=l+y>>>0,f=f+k>>>0,d=d+w>>>0}return t.endian([u,l,f,d])};a._ff=function(e,t,r,n,o,i,a){var s=e+(t&r|~t&n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._gg=function(e,t,r,n,o,i,a){var s=e+(t&n|r&~n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._hh=function(e,t,r,n,o,i,a){var s=e+(t^r^n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._ii=function(e,t,r,n,o,i,a){var s=e+(r^(t|~n))+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(a(e,r));return r&&r.asBytes?n:r&&r.asString?i.bytesToString(n):t.bytesToHex(n)}}()},function(e,t,r){var n="undefined"!==typeof JSON?JSON:r(126);e.exports=function(e,t){t||(t={}),"function"===typeof t&&(t={cmp:t});var r=t.space||"";"number"===typeof r&&(r=Array(r+1).join(" "));var a,s="boolean"===typeof t.cycles&&t.cycles,c=t.replacer||function(e,t){return t},u=t.cmp&&(a=t.cmp,function(e){return function(t,r){var n={key:t,value:e[t]},o={key:r,value:e[r]};return a(n,o)}}),l=[];return function e(t,a,f,d){var p=r?"\n"+new Array(d+1).join(r):"",h=r?": ":":";if(f&&f.toJSON&&"function"===typeof f.toJSON&&(f=f.toJSON()),void 0!==(f=c.call(t,a,f))){if("object"!==typeof f||null===f)return n.stringify(f);if(o(f)){for(var g=[],b=0;b<f.length;b++){var v=e(f,b,f[b],d+1)||n.stringify(null);g.push(p+r+v)}return"["+g.join(",")+p+"]"}if(-1!==l.indexOf(f)){if(s)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(f);var m=i(f).sort(u&&u(f));for(g=[],b=0;b<m.length;b++){var y=e(f,a=m[b],f[a],d+1);if(y){var k=n.stringify(a)+h+y;g.push(p+r+k)}}return l.splice(l.indexOf(f),1),"{"+g.join(",")+p+"}"}}({"":e},"",e,0)};var o=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},i=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var n in e)t.call(e,n)&&r.push(n);return r}},function(e,t,r){var n=r(129),o=r(130),i=o;i.v1=n,i.v4=o,e.exports=i},function(e){e.exports=JSON.parse('{"name":"@skyscanner/session-validation","version":"1.0.45","description":"Library to validate and refresh the access tokens using the refresh token","main":"src/index.js","engines":{"node":"^16.14.2","npm":"^8.5.0"},"scripts":{"coverage":"react-scripts test --coverage","lint:js:staged":"eslint . --ignore-path .gitignore","lint:js":"eslint . --ignore-path .eslintignore --ext .js,.jsx","lint:js:fix":"eslint . --ignore-path .eslintignore --ext .js,.jsx --fix","lint:js:fix:staged":"eslint . --ignore-path .eslintignore --fix","lint":"npm run lint:js","test":"react-scripts test","precommit":"lint-staged"},"lint-staged":{"**/*.{js,jsx}":["npm run lint:js:staged --"]},"dependencies":{"saddlebag-browser":"^6.0.25","saddlebag-cookie":"^3.0.53","saddlebag-date":"^2.0.11","saddlebag-event-tracking":"^3.0.33","saddlebag-grappler":"^2.3.46","saddlebag-localstorage":"^3.0.59","saddlebag-observer":"^3.0.24","saddlebag-user-tracking-events":"^2.1.24"},"devDependencies":{"ensure-node-env":"^1.0.8","eslint-config-skyscanner":"^10.4.0","eslint-plugin-skyscanner-dates":"^1.0.9","husky":"^4.0.0","jest-fetch-mock":"^1.7.5","lint-staged":"^7.1.2"},"publishConfig":{"registry":"https://artifactory.skyscannertools.net/artifactory/api/npm/npm/"},"keywords":["mshell","library","node"],"files":["src"],"author":"Nebula","license":"UNLICENSED","bugs":{"email":"NebulaSquad@skyscanner.net"},"homepage":"https://github.skyscannertools.net/identity/auth-libs/tree/master/packages/session-validation","backpack-react-scripts":{"babelIncludePrefixes":["@skyscanner/","@identity/"]},"jest":{"moduleNameMapper":{"saddlebag-browser":"saddlebag-browser/src/index.js"}},"gitHead":"a92a907d1b7dbfb5586c103dcc066133bba4f2d0"}')},function(module,exports,__webpack_require__){"use strict";function decycle(e){var t=[],r=[];return function e(n,o){var i,a,s,c=n&&n.toJSON instanceof Function?n.toJSON():n;if("object"===typeof c&&null!==c){for(i=0;i<t.length;i+=1)if(t[i]===c)return{$ref:r[i]};if(t.push(c),r.push(o),"[object Array]"===Object.prototype.toString.apply(c))for(s=[],i=0;i<c.length;i+=1)s[i]=e(c[i],o+"["+i+"]");else for(a in s={},c)Object.prototype.hasOwnProperty.call(c,a)&&(s[a]=e(c[a],o+"["+JSON.stringify(a)+"]"));return s}return c}(e,"$")}function retrocycle($){var px=/^\$(?:\[(?:\d+|\"(?:[^\\\"\u0000-\u001f]|\\([\\\"\/bfnrt]|u[0-9a-zA-Z]{4}))*\")\])*$/;return function rez(value){var i,item,name,path;if(value&&"object"===typeof value)if("[object Array]"===Object.prototype.toString.apply(value))for(i=0;i<value.length;i+=1)item=value[i],item&&"object"===typeof item&&(path=item.$ref,"string"===typeof path&&px.test(path)?value[i]=eval(path):rez(item));else for(name in value)"object"===typeof value[name]&&(item=value[name],item&&(path=item.$ref,"string"===typeof path&&px.test(path)?value[name]=eval(path):rez(item)))}($),$}module.exports={stringify:function(e,t,r){return JSON.stringify(decycle(e),t,r)},parse:function(e,t){return retrocycle(JSON.parse(e,t))},decycle:decycle,retrocycle:retrocycle}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?r.push(t.charAt(o>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(n))>>>6-2*o);return r}};e.exports=r}()},function(e,t){function r(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){t.parse=r(127),t.stringify=r(128)},function(e,t){var r,n,o,i,a={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},s=function(e){throw{name:"SyntaxError",message:e,at:r,text:o}},c=function(e){return e&&e!==n&&s("Expected '"+e+"' instead of '"+n+"'"),n=o.charAt(r),r+=1,n},u=function(){var e,t="";for("-"===n&&(t="-",c("-"));n>="0"&&n<="9";)t+=n,c();if("."===n)for(t+=".";c()&&n>="0"&&n<="9";)t+=n;if("e"===n||"E"===n)for(t+=n,c(),"-"!==n&&"+"!==n||(t+=n,c());n>="0"&&n<="9";)t+=n,c();if(e=+t,isFinite(e))return e;s("Bad number")},l=function(){var e,t,r,o="";if('"'===n)for(;c();){if('"'===n)return c(),o;if("\\"===n)if(c(),"u"===n){for(r=0,t=0;t<4&&(e=parseInt(c(),16),isFinite(e));t+=1)r=16*r+e;o+=String.fromCharCode(r)}else{if("string"!==typeof a[n])break;o+=a[n]}else o+=n}s("Bad string")},f=function(){for(;n&&n<=" ";)c()},d=function(){var e=[];if("["===n){if(c("["),f(),"]"===n)return c("]"),e;for(;n;){if(e.push(i()),f(),"]"===n)return c("]"),e;c(","),f()}}s("Bad array")},p=function(){var e,t={};if("{"===n){if(c("{"),f(),"}"===n)return c("}"),t;for(;n;){if(e=l(),f(),c(":"),Object.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=i(),f(),"}"===n)return c("}"),t;c(","),f()}}s("Bad object")};i=function(){switch(f(),n){case"{":return p();case"[":return d();case'"':return l();case"-":return u();default:return n>="0"&&n<="9"?u():function(){switch(n){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null}s("Unexpected '"+n+"'")}()}},e.exports=function(e,t){var a;return o=e,r=0,n=" ",a=i(),f(),n&&s("Syntax error"),"function"===typeof t?function e(r,n){var o,i,a=r[n];if(a&&"object"===typeof a)for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(void 0!==(i=e(a,o))?a[o]=i:delete a[o]);return t.call(r,n,a)}({"":a},""):a}},function(e,t){var r,n,o,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,(function(e){var t=a[e];return"string"===typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function c(e,t){var i,a,u,l,f,d=r,p=t[e];switch(p&&"object"===typeof p&&"function"===typeof p.toJSON&&(p=p.toJSON(e)),"function"===typeof o&&(p=o.call(t,e,p)),typeof p){case"string":return s(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(r+=n,f=[],"[object Array]"===Object.prototype.toString.apply(p)){for(l=p.length,i=0;i<l;i+=1)f[i]=c(i,p)||"null";return u=0===f.length?"[]":r?"[\n"+r+f.join(",\n"+r)+"\n"+d+"]":"["+f.join(",")+"]",r=d,u}if(o&&"object"===typeof o)for(l=o.length,i=0;i<l;i+=1)"string"===typeof(a=o[i])&&(u=c(a,p))&&f.push(s(a)+(r?": ":":")+u);else for(a in p)Object.prototype.hasOwnProperty.call(p,a)&&(u=c(a,p))&&f.push(s(a)+(r?": ":":")+u);return u=0===f.length?"{}":r?"{\n"+r+f.join(",\n"+r)+"\n"+d+"}":"{"+f.join(",")+"}",r=d,u}}e.exports=function(e,t,i){var a;if(r="",n="","number"===typeof i)for(a=0;a<i;a+=1)n+=" ";else"string"===typeof i&&(n=i);if(o=t,t&&"function"!==typeof t&&("object"!==typeof t||"number"!==typeof t.length))throw new Error("JSON.stringify");return c("",{"":e})}},function(e,t,r){var n,o,i=r(21),a=r(22),s=0,c=0;e.exports=function(e,t,r){var u=t&&r||0,l=t||[],f=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==d){var p=i();null==f&&(f=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=o=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,b=h-s+(g-c)/1e4;if(b<0&&void 0===e.clockseq&&(d=d+1&16383),(b<0||h>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,c=g,o=d;var v=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;l[u++]=v>>>24&255,l[u++]=v>>>16&255,l[u++]=v>>>8&255,l[u++]=255&v;var m=h/4294967296*1e4&268435455;l[u++]=m>>>8&255,l[u++]=255&m,l[u++]=m>>>24&15|16,l[u++]=m>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var y=0;y<6;++y)l[u+y]=f[y];return t||a(l)}},function(e,t,r){var n=r(21),o=r(22);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(N){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),a=new T(n||[]);return i._invoke=function(e,t,r){var n=f;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=l(e,t,r);if("normal"===c.type){if(n=r.done?h:d,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(N){return{type:"throw",arg:N}}}e.wrap=u;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",g={};function b(){}function v(){}function m(){}var y={};c(y,i,(function(){return this}));var k=Object.getPrototypeOf,w=k&&k(k(A([])));w&&w!==r&&n.call(w,i)&&(y=w);var O=m.prototype=b.prototype=Object.create(y);function j(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function S(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method))return g;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var r=e[i];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return v.prototype=m,c(O,"constructor",m),c(m,"constructor",v),v.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},j(_.prototype),c(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new _(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(O),c(O,s,"Generator"),c(O,i,(function(){return this})),c(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:A(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=n}catch(o){"object"===typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){var n,o,i=r(23),a=r(24),s=0,c=0;e.exports=function(e,t,r){var u=t&&r||0,l=t||[],f=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==d){var p=i();null==f&&(f=n=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=o=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,b=h-s+(g-c)/1e4;if(b<0&&void 0===e.clockseq&&(d=d+1&16383),(b<0||h>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,c=g,o=d;var v=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;l[u++]=v>>>24&255,l[u++]=v>>>16&255,l[u++]=v>>>8&255,l[u++]=255&v;var m=h/4294967296*1e4&268435455;l[u++]=m>>>8&255,l[u++]=255&m,l[u++]=m>>>24&15|16,l[u++]=m>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var y=0;y<6;++y)l[u+y]=f[y];return t||a(l)}},function(e,t,r){var n=r(23),o=r(24);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(25))&&n.__esModule?n:{default:n};var i=function(e,t){var r=(0,o.default)(e,t);return r&&"string"===typeof r?r:null};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,o.default)(e,t);return r?new n.default(r):null};var n=i(r(26)),o=i(r(25));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){var n={"./":9,"./development":14,"./development.js":14,"./index":9,"./index.js":9,"./index.test":29,"./index.test.js":29,"./production":15,"./production.js":15};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=136},function(e,t,r){var n={"./common-redirect/skippyHotelUrls":[39,9,1],"./common-redirect/skippyHotelUrls.js":[39,9,1],"./common-redirect/skippyHotelUrls.test":[65,9,2],"./common-redirect/skippyHotelUrls.test.js":[65,9,2],"./common-utils/iataMappings":[35,3,3],"./common-utils/iataMappings.json":[35,3,3],"./common-utils/util":[38,9,4],"./common-utils/util.js":[38,9,4],"./common-utils/util.test":[66,9,5],"./common-utils/util.test.js":[66,9,5],"./criteo/__snapshots__/criteo.test.js.snap":[140,9,92],"./criteo/criteo":[42,9,6],"./criteo/criteo-props-used":[67,3,7],"./criteo/criteo-props-used.json":[67,3,7],"./criteo/criteo.js":[42,9,6],"./criteo/criteo.md":[141,9,93],"./criteo/criteo.test":[68,9,8],"./criteo/criteo.test.js":[68,9,8],"./email-signup-widget/email-signup-widget":[43,9,9],"./email-signup-widget/email-signup-widget-props-used":[69,3,10],"./email-signup-widget/email-signup-widget-props-used.json":[69,3,10],"./email-signup-widget/email-signup-widget.js":[43,9,9],"./email-signup-widget/email-signup-widget.md":[142,9,94],"./email-signup-widget/email-signup-widget.test":[70,9,11],"./email-signup-widget/email-signup-widget.test.js":[70,9,11],"./facebook-dbook-flights/facebook-dbook-flights":[44,9,12],"./facebook-dbook-flights/facebook-dbook-flights-props-used":[71,3,13],"./facebook-dbook-flights/facebook-dbook-flights-props-used.json":[71,3,13],"./facebook-dbook-flights/facebook-dbook-flights.js":[44,9,12],"./facebook-dbook-flights/facebook-dbook-flights.md":[143,9,95],"./facebook-dbook-flights/facebook-dbook-flights.test":[72,9,14],"./facebook-dbook-flights/facebook-dbook-flights.test.js":[72,9,14],"./facebook-dbook-hotels/facebook-dbook-hotels":[45,9,15],"./facebook-dbook-hotels/facebook-dbook-hotels-props-used":[73,3,16],"./facebook-dbook-hotels/facebook-dbook-hotels-props-used.json":[73,3,16],"./facebook-dbook-hotels/facebook-dbook-hotels.js":[45,9,15],"./facebook-dbook-hotels/facebook-dbook-hotels.md":[144,9,96],"./facebook-dbook-hotels/facebook-dbook-hotels.test":[74,9,17],"./facebook-dbook-hotels/facebook-dbook-hotels.test.js":[74,9,17],"./facebook-search-hotels/facebook-search-hotels":[46,9,19],"./facebook-search-hotels/facebook-search-hotels-props-used":[75,3,20],"./facebook-search-hotels/facebook-search-hotels-props-used.json":[75,3,20],"./facebook-search-hotels/facebook-search-hotels.js":[46,9,19],"./facebook-search-hotels/facebook-search-hotels.md":[145,9,97],"./facebook-search-hotels/facebook-search-hotels.test":[76,9,21],"./facebook-search-hotels/facebook-search-hotels.test.js":[76,9,21],"./facebook-view-hotels/facebook-view-hotels":[47,9,22],"./facebook-view-hotels/facebook-view-hotels-props-used":[77,3,23],"./facebook-view-hotels/facebook-view-hotels-props-used.json":[77,3,23],"./facebook-view-hotels/facebook-view-hotels.js":[47,9,22],"./facebook-view-hotels/facebook-view-hotels.md":[146,9,98],"./facebook-view-hotels/facebook-view-hotels.test":[78,9,24],"./facebook-view-hotels/facebook-view-hotels.test.js":[78,9,24],"./facebook/facebookutils":[36,9,18],"./facebook/facebookutils.js":[36,9,18],"./facebookredirect/facebookredirect":[48,9,25],"./facebookredirect/facebookredirect-props-used":[79,3,26],"./facebookredirect/facebookredirect-props-used.json":[79,3,26],"./facebookredirect/facebookredirect.js":[48,9,25],"./facebookredirect/facebookredirect.md":[147,9,99],"./facebookredirect/facebookredirect.test":[80,9,27],"./facebookredirect/facebookredirect.test.js":[80,9,27],"./facebooksearch/facebooksearch":[49,9,28],"./facebooksearch/facebooksearch-props-used":[81,3,29],"./facebooksearch/facebooksearch-props-used.json":[81,3,29],"./facebooksearch/facebooksearch.js":[49,9,28],"./facebooksearch/facebooksearch.md":[148,9,100],"./facebooksearch/facebooksearch.test":[82,9,30],"./facebooksearch/facebooksearch.test.js":[82,9,30],"./facebookview/facebookview":[50,9,31],"./facebookview/facebookview-props-used":[83,3,32],"./facebookview/facebookview-props-used.json":[83,3,32],"./facebookview/facebookview.js":[50,9,31],"./facebookview/facebookview.md":[149,9,101],"./facebookview/facebookview.test":[84,9,33],"./facebookview/facebookview.test.js":[84,9,33],"./gtag-common/conversion-markets":[85,9,34],"./gtag-common/conversion-markets.js":[85,9,34],"./gtag-common/generic-event-parameters":[40,9,35],"./gtag-common/generic-event-parameters.js":[40,9,35],"./gtag-common/generic-event-parameters.test":[86,9,36],"./gtag-common/generic-event-parameters.test.js":[86,9,36],"./gtag-common/gtag-init":[37,9,37],"./gtag-common/gtag-init.js":[37,9,37],"./gtag-dbook-hotels/gtag-dbook-hotels":[52,9,41],"./gtag-dbook-hotels/gtag-dbook-hotels-props-used":[89,3,42],"./gtag-dbook-hotels/gtag-dbook-hotels-props-used.json":[89,3,42],"./gtag-dbook-hotels/gtag-dbook-hotels.js":[52,9,41],"./gtag-dbook-hotels/gtag-dbook-hotels.md":[151,9,103],"./gtag-dbook-hotels/gtag-dbook-hotels.test":[90,9,43],"./gtag-dbook-hotels/gtag-dbook-hotels.test.js":[90,9,43],"./gtag-dbook/gtag-dbook":[51,9,38],"./gtag-dbook/gtag-dbook-props-used":[87,3,39],"./gtag-dbook/gtag-dbook-props-used.json":[87,3,39],"./gtag-dbook/gtag-dbook.js":[51,9,38],"./gtag-dbook/gtag-dbook.md":[150,9,102],"./gtag-dbook/gtag-dbook.test":[88,9,40],"./gtag-dbook/gtag-dbook.test.js":[88,9,40],"./gtag-hotels-search/gtag-hotels-search":[53,9,44],"./gtag-hotels-search/gtag-hotels-search-props-used":[91,3,45],"./gtag-hotels-search/gtag-hotels-search-props-used.json":[91,3,45],"./gtag-hotels-search/gtag-hotels-search.js":[53,9,44],"./gtag-hotels-search/gtag-hotels-search.md":[152,9,104],"./gtag-hotels-search/gtag-hotels-search.test":[92,9,46],"./gtag-hotels-search/gtag-hotels-search.test.js":[92,9,46],"./gtag-hotels-view/gtag-hotels-view-props-used":[93,3,47],"./gtag-hotels-view/gtag-hotels-view-props-used.json":[93,3,47],"./gtag-redirect/gtag-redirect":[54,9,48],"./gtag-redirect/gtag-redirect-props-used":[94,3,49],"./gtag-redirect/gtag-redirect-props-used.json":[94,3,49],"./gtag-redirect/gtag-redirect.js":[54,9,48],"./gtag-redirect/gtag-redirect.md":[153,9,105],"./gtag-redirect/gtag-redirect.test":[95,9,50],"./gtag-redirect/gtag-redirect.test.js":[95,9,50],"./gtag-search/gtag-search":[55,9,51],"./gtag-search/gtag-search-props-used":[96,3,52],"./gtag-search/gtag-search-props-used.json":[96,3,52],"./gtag-search/gtag-search.js":[55,9,51],"./gtag-search/gtag-search.md":[154,9,106],"./gtag-search/gtag-search.test":[97,9,53],"./gtag-search/gtag-search.test.js":[97,9,53],"./gtag-view/gtag-view":[56,9,54],"./gtag-view/gtag-view-props-used":[98,3,55],"./gtag-view/gtag-view-props-used.json":[98,3,55],"./gtag-view/gtag-view.js":[56,9,54],"./gtag-view/gtag-view.md":[155,9,107],"./gtag-view/gtag-view.test":[99,9,56],"./gtag-view/gtag-view.test.js":[99,9,56],"./logi-bear-s2s-collector/logi-bear-s2s-collector":[57,9,0,57],"./logi-bear-s2s-collector/logi-bear-s2s-collector-props-used":[100,3,58],"./logi-bear-s2s-collector/logi-bear-s2s-collector-props-used.json":[100,3,58],"./logi-bear-s2s-collector/logi-bear-s2s-collector.js":[57,9,0,57],"./logi-bear-s2s-collector/logi-bear-s2s-collector.md":[156,9,108],"./logi-bear-s2s-collector/logi-bear-s2s-collector.test":[101,9,0,84,59],"./logi-bear-s2s-collector/logi-bear-s2s-collector.test.js":[101,9,0,84,59],"./microsoftUetRedirect/microsoftUetRedirect":[103,9,60],"./microsoftUetRedirect/microsoftUetRedirect-props-used":[102,3,61],"./microsoftUetRedirect/microsoftUetRedirect-props-used.json":[102,3,61],"./microsoftUetRedirect/microsoftUetRedirect.js":[103,9,60],"./microsoftUetRedirect/microsoftUetRedirect.md":[157,9,110],"./microsoftUetSearch/microsoftUetSearch":[105,9,62],"./microsoftUetSearch/microsoftUetSearch-props-used":[104,3,63],"./microsoftUetSearch/microsoftUetSearch-props-used.json":[104,3,63],"./microsoftUetSearch/microsoftUetSearch.js":[105,9,62],"./microsoftUetSearch/microsoftUetSearch.md":[158,9,111],"./microsoftUetView/microsoftUetView":[107,9,64],"./microsoftUetView/microsoftUetView-props-used":[106,3,65],"./microsoftUetView/microsoftUetView-props-used.json":[106,3,65],"./microsoftUetView/microsoftUetView.js":[107,9,64],"./microsoftUetView/microsoftUetView.md":[159,9,112],"./perimeterx/perimeterx":[58,9,66],"./perimeterx/perimeterx-props-used":[108,3,67],"./perimeterx/perimeterx-props-used.json":[108,3,67],"./perimeterx/perimeterx.js":[58,9,66],"./perimeterx/perimeterx.md":[160,9,113],"./perimeterx/perimeterx.test":[109,9,68],"./perimeterx/perimeterx.test.js":[109,9,68],"./propwatcher/expected-props":[41,3,69],"./propwatcher/expected-props.json":[41,3,69],"./propwatcher/propwatcher":[59,9,70],"./propwatcher/propwatcher-props-used":[110,3,71],"./propwatcher/propwatcher-props-used.json":[110,3,71],"./propwatcher/propwatcher.js":[59,9,70],"./propwatcher/propwatcher.md":[161,9,114],"./propwatcher/propwatcher.test":[111,9,72],"./propwatcher/propwatcher.test.js":[111,9,72],"./sat-register/optional-extra-docs.md":[164,9,116],"./sat-register/sat-register":[61,9,73],"./sat-register/sat-register-props-used":[114,3,74],"./sat-register/sat-register-props-used.json":[114,3,74],"./sat-register/sat-register.js":[61,9,73],"./sat-register/sat-register.md":[165,9,117],"./sat-register/sat-register.test":[115,9,75],"./sat-register/sat-register.test.js":[115,9,75],"./sat/optional-extra-docs.md":[162,9,115],"./sat/sat":[60,9,76],"./sat/sat-props-used":[112,3,77],"./sat/sat-props-used.json":[112,3,77],"./sat/sat.js":[60,9,76],"./sat/sat.md":[163,9,118],"./sat/sat.test":[113,9,78],"./sat/sat.test.js":[113,9,78],"./travel-audience/travel-audience":[62,9,79],"./travel-audience/travel-audience-props-used":[116,3,80],"./travel-audience/travel-audience-props-used.json":[116,3,80],"./travel-audience/travel-audience.js":[62,9,79],"./travel-audience/travel-audience.md":[166,9,119],"./travel-audience/travel-audience.test":[117,9,81],"./travel-audience/travel-audience.test.js":[117,9,81],"./usabilla/usabilla":[119,9,85,82],"./usabilla/usabilla-props-used":[118,3,83],"./usabilla/usabilla-props-used.json":[118,3,83],"./usabilla/usabilla.js":[119,9,85,82],"./usabilla/usabilla.md":[167,9,120],"./yahoo-retargeting/yahoo-retargeting":[63,9,86],"./yahoo-retargeting/yahoo-retargeting-props-used":[120,3,87],"./yahoo-retargeting/yahoo-retargeting-props-used.json":[120,3,87],"./yahoo-retargeting/yahoo-retargeting.js":[63,9,86],"./yahoo-retargeting/yahoo-retargeting.md":[168,9,121],"./yahoo-retargeting/yahoo-retargeting.test":[121,9,88],"./yahoo-retargeting/yahoo-retargeting.test.js":[121,9,88],"./yandex-metrica/__snapshots__/yandex-metrica.test.js.snap":[169,9,122],"./yandex-metrica/yandex-metrica":[64,9,89],"./yandex-metrica/yandex-metrica-props-used":[122,3,90],"./yandex-metrica/yandex-metrica-props-used.json":[122,3,90],"./yandex-metrica/yandex-metrica.js":[64,9,89],"./yandex-metrica/yandex-metrica.md":[170,9,123],"./yandex-metrica/yandex-metrica.test":[123,9,91],"./yandex-metrica/yandex-metrica.test.js":[123,9,91]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(2).map(r.e)).then((function(){return r.t(o,t[1])}))}o.keys=function(){return Object.keys(n)},o.id=137,e.exports=o},function(e,t,r){r.p="".concat(window.TAG_MANAGER_PROPS.staticPath,"build/")},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"getPreferences",(function(){return re})),r.d(n,"setPreferences",(function(){return z})),r.d(n,"setInitialPreferences",(function(){return ee})),r.d(n,"acknowledgeTrackingSettings",(function(){return oe})),r.d(n,"showCookieBanner",(function(){return ne})),r.d(n,"isGdprInitialised",(function(){return Z})),r.d(n,"isGdprInitSessionActive",(function(){return X}));var o={};r.r(o),r.d(o,"getPreferences",(function(){return ue})),r.d(o,"setPreferences",(function(){return ie})),r.d(o,"setInitialPreferences",(function(){return ce})),r.d(o,"acknowledgeTrackingSettings",(function(){return fe})),r.d(o,"showCookieBanner",(function(){return le})),r.d(o,"isGdprInitialised",(function(){return ae})),r.d(o,"isGdprInitSessionActive",(function(){return se}));var i=r(30),a=r.n(i),s=r(31),c=r.n(s),u=r(7),l=r(2),f=(r(17),r(1)),d=f.a.getWindow()||{};d.__skyOCsLoadedScripts=d.__skyOCsLoadedScripts||{};var p=f.a.getWindow()||{};p.sky__OCs||(p.sky__OCs={components:Object.create(null),waiting:Object.create(null)});var h,g,b=p.sky__OCs,v=b.components,m=b.waiting,y=function(e,t,r){return a()("".concat(e).concat(t).concat(c()(r)))},k=function(e){var t=e.name,r=e.version,n=e.params,o=void 0===n?{}:n,i=e.componentDefinition,a=e.hydrate,s=e.props;delete o.clientOnly,delete o.SSR;var c=y(t,r,o);return v[c]?!!m[c]&&(m[c].resolve({componentDefinition:i,hydrate:a,props:s}),u.a.publish("component-registered",{name:t,version:r,params:o}),u.a.publish("component-registered-".concat(c),{name:t,version:r,params:o}),delete m[c],!0):(v[c]=Promise.resolve({componentDefinition:i,hydrate:a,props:s}),u.a.publish("component-registered",{name:t,version:r,params:o}),u.a.publish("component-registered-".concat(c),{name:t,version:r,params:o}),!0)},w=r(3),O=r(0),j=r.n(O),_=r(11),S=r(12),E=r(6),x=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","UK","NO","LI","IS"],T=!0,A=!1,P="gdpr",N="isGdprActiveInMarket",R=Object.freeze({OPTIN:"optin",INFORMATION:"information",ADVERTS:"adverts",VERSION:"version"}),I=Object.freeze((h={},Object(E.a)(h,R.INFORMATION,T),Object(E.a)(h,R.ADVERTS,T),Object(E.a)(h,R.VERSION,2),h)),C=Object.freeze((g={},Object(E.a)(g,R.INFORMATION,A),Object(E.a)(g,R.ADVERTS,A),Object(E.a)(g,R.VERSION,2),g)),U=function(e){return!e||x.indexOf((e||"").toUpperCase())>=0},V=function(e,t){return Object(l.a)(Object(l.a)({},t),{},Object(E.a)({},N,U(e)))},M=function(e){return parseInt(e.getValue(R.VERSION),10)||0},L=function(e,t,r){var n=e.getValue(r);return null!=n?"true"===(n||""):function(e){return U(e)?A:T}(t)},D=r(8),F=function(e){return new D.a(e)},B=function(e){return new D.b(e)},W=function(){u.a.publish("user-preferences-changed"),u.a.publish("tracking-preferences-changed")},G="init",J=function(e){return e===N||Object.keys(R).map((function(e){return R[e]})).indexOf(e)>=0},q=function(){var e=F(P);return 2===M(e)},H=function(){var e=f.a.getWindow();e.Sb&&e.Sb.trackingPreferences&&e.Sb.trackingPreferences.initialLoad&&delete e.Sb.trackingPreferences.initialLoad},K=function(){var e=B(P);-1===(e.getValue()||"").indexOf("version:::")&&e.remove()},$=function(e,t){t?(e.setValue(G,!0),e.store(null,{secure:!1})):(e.deleteValue(G),e.store(730,{secure:!1}),H())},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&Object.keys(e).forEach((function(e){if(!J(e))throw new Error("Invalid preference name provided!")})),K();var r=F(P),n=Object(l.a)(Object(l.a)({},e),{},Object(E.a)({},R.VERSION,2));Object.keys(n).forEach((function(e){return r.setValue(e,n[e])})),r.keys().filter((function(e){return Object.keys(R).map((function(e){return R[e]})).indexOf(e)<0})).forEach((function(e){return r.deleteValue(e)})),$(r,t),W()},z=function(e){return Y(e,!1)},Z=function(){return Object(D.c)(P)&&q()},X=function(){return(B(P).getValue()||"").indexOf("".concat(G,":::true"))>=0},Q=function(){var e=f.a.getWindow(),t=e.Sb&&e.Sb.trackingPreferences&&e.Sb.trackingPreferences.initialLoad,r=X();return t||r},ee=function(e){if(q())throw new Error("There is already a GDPR cookie with the latest version present");!function(){var e=f.a.getWindow();e.Sb||(e.Sb={}),e.Sb.trackingPreferences||(e.Sb.trackingPreferences={}),e.Sb.trackingPreferences.initialLoad=!0}(),Y(function(e){return U(e)?C:I}(e),!0)},te=function(e,t){if(!Object(D.c)(P))return V(e,t);var r=F(P);return M(r)<2?V(e,t):(function(e){"true"===(e.getValue(G)||"")&&$(e,!1)}(r),function(e,t){var r,n=L(e,t,R.INFORMATION),o=L(e,t,R.ADVERTS);return r={},Object(E.a)(r,R.INFORMATION,n),Object(E.a)(r,R.ADVERTS,o),Object(E.a)(r,R.VERSION,M(e)),Object(E.a)(r,N,U(t)),r}(r,e))},re=function(e){if(!e)throw new Error("Market should be provided to get tracking preferences");return U(e)?function(e){var t;return Q()||X()?(t={},Object(E.a)(t,R.INFORMATION,A),Object(E.a)(t,R.ADVERTS,A),Object(E.a)(t,R.VERSION,2),Object(E.a)(t,N,U(e)),t):te(e,C)}(e):function(e){return te(e,I)}(e)},ne=function(e){if(!e)throw new Error("Market should be provided to determine if cookie-banner is required to be shown");return!!Q()||(U(e)?!Z():Object(D.c)(P)&&!q())},oe=function(){if(!Z())throw new Error("Tracking settings are not complete. Either not set or invalid");if(Q()){var e=F(P);H(),$(e,!1),W()}},ie=function(){},ae=function(){return!0},se=function(){return!1},ce=function(){},ue=function(e){if(!e)throw new Error("Market should be provided to get tracking preferences");var t=U(e)?C:I;return V(e,t)},le=function(e){if(!e)throw new Error("Market should be provided to determine if cookie-banner is required to be shown");return!1},fe=function(){},de=/Skyscanner/;var pe=function(){var e=f.a.getNavigator();return!!e.userAgent&&de.test(e.userAgent)}()?o:n,he=(pe.acknowledgeTrackingSettings,pe.getPreferences),ge=(pe.isGdprInitSessionActive,pe.isGdprInitialised,pe.setInitialPreferences,pe.setPreferences,pe.showCookieBanner,function(){var e=Object(w.a)(j.a.mark((function e(t,n,o,i){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(137)("./".concat(t,"/").concat(t));case 2:a=e.sent,(0,a.default)(Object(l.a)(Object(l.a)({},n),o),i);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,o){return e.apply(this,arguments)}}()),be=ge,ve=function(e){return 3===(e||"").length?e:void 0},me=function(e){return{originIata:ve(e.originIata)||ve(e.originAirport)||ve(e.originId)||ve(e.originCityId),destinationIata:ve(e.destinationIata)||ve(e.destinationAirport)||ve(e.destinationId)||ve(e.destinationCityId)}},ye=r(19),ke=new _.a("public","js-tag-manager"),we=function(e){var t=Object(l.a)({},e);return Object.keys(t).forEach((function(e){"boolean"!==typeof t[e]&&(t[e]=void 0)})),t},Oe=function(e){var t=Object(l.a)({},e);return["consentInformation","consentAdverts","isApp"].forEach((function(e){"boolean"!==typeof t[e]&&(t[e]=void 0)})),t},je=function(e,t,r){var n,o,i=function(e,t){return[Oe(e),we(t)]}(e,t),a=Object(ye.a)(i,2),s=a[0],c=a[1];return"essential"===r?o=!0:!1!==s.isApp?"information"===r?"boolean"===typeof s.consentInformation?(n=!0,o=s.consentInformation):(n=!1,o=c[r]):"adverts"===r&&("boolean"===typeof s.consentAdverts?(n=!0,o=s.consentAdverts):(n=!1,o=c[r])):!1===s.isApp&&(o="boolean"===typeof c[r]&&c[r],n=!1),"skippy"===s.pagetype&&ke.track("sandbox.JsTagManagerIsApp",{isApp:s.isApp,has_override:n}),!0===o},_e=new _.a("public","js-tag-manager"),Se=function(e){var t=Object(l.a)({},e);return delete t.dynamics,t},Ee=function(){var e=Object(w.a)(j.a.mark((function e(t){var r,n,o,i,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dynamics,n=he(t.market),o=me(t),i=0,e.next=6,Promise.all(r.map(function(){var e=Object(w.a)(j.a.mark((function e(r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.triedToLoad||!je(t,n,r.category)){e.next=12;break}return e.prev=1,r.triedToLoad=!0,i+=1,e.next=6,be(r.name,Se(t),o,f.e);case 6:return e.abrupt("return",{tag:r.name,category:r.category,page:t.pagetype});case 9:e.prev=9,e.t0=e.catch(1),Object(S.a)(t,e.t0,"Failed to inject '".concat(r.name,"' tag"));case 12:return e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()));case 6:a=e.sent,(s=a.filter((function(e){return!!e}))).length>0&&_e.trackBatch("js_tag_manager.TagLaunches",s),i?u.a.publish("tags-loaded"):Object(S.b)(t,"loadTags did not try to load any tags (received ".concat(r.length," dynamic tags)"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(w.a)(j.a.mark((function e(t,r,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,clearTimeout(n),e.next=6,Ee(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Object(S.a)(r,e.t0,"Failed to load tags");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,r,n){return e.apply(this,arguments)}}(),Te=new _.a("public","js-tag-manager"),Ae=function(e){var t=Object(l.a)({},e),r=f.a.getWindow();r.__tagmanagerProps=t,"skippy"===t.pagetype&&t.skippyUrl.indexOf("&facilitated=true")&&500===r.context.redirect_delay&&(t.pagetype="dbook-skippy"),Te.track("js_tag_manager.JsTagManagerLaunches",{page:t.pagetype});var n=setTimeout((function(){Object(S.b)(t,"loadTags was not called within ".concat(5e3,"ms of launching tag manager"))}),5e3),o=!1;return u.a.subscribe("tracking-preferences-changed",Object(w.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(o,t,n);case 2:case"end":return e.stop()}}),e)})))),Object(f.b)(Object(w.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=!0,e.next=3,xe(o,t,n);case 3:case"end":return e.stop()}}),e)})))),null},Pe=(r(138),window.TAG_MANAGER_PROPS);k({name:"js-tag-manager",version:Pe.version,componentDefinition:Ae,props:{dynamics:Pe.dynamics,pagetype:Pe.pagetype,url:Pe.url}})}]);
//# sourceMappingURL=main.fc93d9ea.js.map